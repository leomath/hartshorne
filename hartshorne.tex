\documentclass{../mathnotes}

\usepackage{tikz-cd}
\usepackage{todonotes}

\title{Hartshorne Solutions}
\author{Matei Ionita and Nilay Kumar}
\date{Last updated: \today}


\begin{document}

\maketitle

\subsection*{Problem I.1.1}
\begin{enumerate}[(a)]
    \item Let $Y$ be the plane curve $y-x^2=0$. The coordinate ring $A(Y)=k[x,y]/(y-x^2)$
        is isomorphic to $k[x]$, as any power of $y$ is simply replaced by $x^2$.
    \item Let $Z$ be the plane curve $xy-1=0$. The corrdinate ring $A(Z)=k[x,y]/(xy-1)$
        is clearly not isomorphic to a polynomial ring of one variable, as there are
        non-constant elements of $A(Z)$ (namely, powers of $y$) that are invertible.
    \item We assume that the $\characteristic k\neq 2$.
        Let $f$ be an irreducible quadratic polynomial in $k[x,y]$, i.e.
        \[f(x,y)=x^2+axy+by^2+cx+dy+e,\]
        and let $W$ be the conic defined by $f$ (we can choose $f$ to be monic without
        loss of generality).
        
        Suppose the degree two terms are a perfect square.
        Then we may change variables to obtain $z^2+bz+dy+e$ (with new coefficients).
        Completing the square (here we use $\characteristic k\neq 2$) in $z$ and changing
        variables again, we obtain $w^2-y=0$, which yields the curve $Y$ from part
        (a) above.

        If the degree two terms do not factor perfectly, we can write $f$ as
\[       f(x,y) = g(x,y) h(x,y) + e(x,y)     \]
Where $g,h,e$ are linear polynomials, with $g,h$ distinct. Then we can change variables $\big( g(x,y) , h(x,y) \big) \to (x,y)  $, and we reduce the problem to
\[       f(x,y) = xy + cx + dy +e      \]
With yet another change of variables $(x+d, y+c) \to (x,y)$, this reduces to $f(x,y) = xy - 1$, which yields the curve from part (b).
\end{enumerate}

\subsection*{Problem I.1.2}
Let $Y\subset \A^3$ be the set $Y=\left\{ (t,t^2,t^3)\mid t\in k\right\}$.
Consider $\fr a=(y-x^2,z-x^3)\subset k[x,y,z]$. $\fr a \subset I(Y)$ is immediate, and the converse holds because $\fr a$ is prime. Indeed, $k[x,y,z]/\fr a \cong k[x]$, which is a domain. The coordinate ring is thus given by $A(Y)=k[x]$. Then $\dim Y = \dim k[x] = 1$.


\subsection*{Problem I.2.1}
If $x_0, \dots, x_n$ are homogenous coordinates on $\Proj^n$, they can also be regarded as affine coordinates on $\A^{n+1}$. Similarily, given the homogenous ideal $\fr a \subset S$, we consider the ideal $\fr a' \subset k[x_0, \dots, x_n]$ that contains the same elements as $\fr a$, viewed as functions on $\A^{n+1}$. Thus $f\in \fr a$ gives $f \in \fr a'$.
 Moreover, $f([a_0 , \dots, a_n]) = 0$ for some $[a_0, \dots, a_n] \in \Proj^n$ means that $f(\lambda a_0, \dots, \lambda a_n) = 0$ for all $\lambda \in k$. Therefore $Z(\fr a')$ is the affine cone $C\big(Z(\fr a)\big)$, and clearly $f(P) = 0$ for all $P \in Z(\fr a) \Leftrightarrow f(Q) = 0$ for all $Q \in C\big(Z(\fr a)\big)$. Then the Nullstellensatz gives $f^q \in \fr a'$ for some $q>0$, which means that $f^q \in \fr a$ for the same $q$.

\subsection*{Problem I.2.15}
\begin{enumerate}[(a)]
\item Consider the image of the Segre embedding:
\[     \big( [a:b] , [c:d]\big) \mapsto [ac : ad : bc : bd]    \]
Denote the four homogenous coordinates by $x, z, w, y$ in this order. We see that $xy - zw = 0$, so $\psi(\Proj^1 \times \Proj^1) \subset Q$. Conversely, for any $P = [x:z:w:y] \in Q$, we want to find $[a:b], [c:d] \in \Proj^1$ such that $P = \psi\big([a:b], [c:d] \big)$. At least one of $x,z,w,y$ is nonzero, and on a case by case basis we can construct an element of the preimage $\psi^{-1}(P)$. Assume that $x\neq 0$, then take $[a:b] = [x:w]$ and $[c:d] = [x:z]$. Then
\[        \psi\big([x:w], [x:z] \big) = [x^2 : xz : xw: wz] = [x: z: w: y]    \]
Where we used $x\neq 0$ to write $y = wz/x$. The other three cases work similarly.
\item For fixed values $a = \alpha, b = \beta$, the family $\{L_t\}$ of curves $\Proj^1 \to Q$ given by
\[       [c:d] \mapsto [\alpha c : \alpha d : \beta c : \beta d ] = [t c : t d : c : d]   \]
with $t=\alpha/\beta \in \Proj^1$, are actually lines, as their ideal in $\Proj^3$ is generated by linear polynomials: $(\beta x - \alpha w, \beta z - \alpha y)$. Similarly $\{M_u\}$ is the family of lines
\[         [a:b] \mapsto [\gamma a : \delta a : \gamma b : \delta b]   = [u a : a : ub:b]    \]
It's clear that $L_t \cap L_{t'} \neq \emptyset$ only if $t=t'$, and similarly for $M_u$. Now we look at $L_t \cap M_u$, for fixed $t,u$.
\[       (tc, td, c,d) = \lambda (ua, a, ub, b)      \]
\[    \Rightarrow   \begin{cases}      d = \lambda b \\ c = \lambda ub \\ d = \lambda a/t \\ c = \lambda a u/t        \end{cases}  \Rightarrow  \begin{cases} a = tb \\ c = \lambda ub \\ d = \lambda b \end{cases}  \]
This completely determines the homogenous coordinates of the intersection point, which is therefore unique.
\item In the product topology $\Proj^1 \times \Proj^1$, all nontrivial closed sets are finite unions of points and lines. Therefore it suffices to show that $Q$ in the subspace topology contains a closed curve that's not a line. Consider $\Proj^1 \to Q$ given by
\[    [t : u] \mapsto [t^3 : t^2 u : tu^2 : u^3]      \]
This curve is the vanishing in $Q$ of the homogenous degree 3 polynomial $z^3 - x^2y$. Its ideal in $\Proj^3$ is $(xy-zw, z^3 - x^2y)$, which cannot be generated by linear polynomials, hence the curve is not linear. 
\end{enumerate}

\subsection*{Problem I.3.1}
\begin{enumerate}[(a)]
    \item By the results of problem 1.1, we know that any conic in $\A^2$ can be written as either
        a variety $Y$ defined by $y-x^2=0$ or a variety $Z$ defined by $xy-1=0$. We know that
        $A(Y)=k[x]$ and $A(Z)=k[x,x^{-1}]$. Note that $A(Y)\cong A(\A^1)$, and hence by Corollary
        3.7, $Y\cong\A^1$ as affine varieties. It remains to show that $Z$ is isomorphic to
        $\A^1-\{0\}$. Note first that $xy-1=0$ can be parametrized as $(t,t^{-1})$, which
        suggests the map $\phi:Z\to\A^1-\{0\}$ given by $\phi(t,t^{-1})=t$ as well as the reverse
        $\psi:\A^1-\{0\}\to Z$ given by $\psi(x)=(x,x^{-1})$. It is easy to check $\phi$ and $\psi$
        are morphisms with $\psi\circ\phi=\id_Z$ and $\phi\circ\psi=\id_{\A^1-\{0\}}$.
    \item Let $B$ be a proper open subset of $\A^1$. By definition of the Zariski topology, we can
        write $B=\A^1\setminus\{p_1,\ldots, p_n\}$ where $p_i$ are a finite set of points in $\A^1$.
        The ring of regular functions of $\A^1$ is $\mathcal{O}(\A^1)=k[x]$. In $B$, however,
        polynomials that vanish only at any of the $p_i$ are globally invertible, and hence
        $\mathcal{O}(B)=k[x,(x-p_1)^{-1},\ldots,(x-p_n)^{-1}]$. These two rings are clearly
        not isomorphic, which completes the proof.
    \item In the projective plane, we can write a conic as $F(x,y,z)=ax^2+2bxy+2cxz+dy^2+2eyz+fz^2$,
        which can be rewritten under an appropriate change of variables as $x^2+y^2+z^2$\todo{do this} (assuming
        $\characteristic k\neq 2$). Hence every
        conic in the projective plane is isomorphic, and it will suffice to show that there exists
        a conic that is isomorphic to $\Proj^1$.
        This follows From the result of exercise I.3.4: the $2$-uple embedding 
        $\rho_2:\Proj^1\to\Proj^2$ is an isomorphism onto its image
        \[\rho_2(a_0,a_1)=(a_0^2,a_0a_1,a_1^2),\]
        which clearly traces out a conic $xz-y^2$.
    \item This is hard!! \todo{finish}
    \item If an affine variety $X$ is isomorphic to a projective variety $Y$, then we must have
        that $\mathcal{O}(X)=\mathcal{O}(Y)=k$. But for $k[x_1,\ldots,x_n]/I(X)=k$, $I(X)$
        must be maximal. Hence $I(X)=(x_1-a_1,\ldots,x_n-a_n)$, i.e. $X$ is just a point.
\end{enumerate}

\subsection*{Problem I.3.14}
\begin{enumerate}[(a)]
    \item Note first that $\phi$ is continuous, as the preimage of any closed subset $V\subset \Proj^n$
        is the projective cone $\overline{C(V)}$, which is closed in $\Proj^{n+1}$. 
        Furthermore, the point at which the line connecting any $Q$ and $P$ to the hypersurface
        (choose $x_0=0$ without loss of generality) is given by 
        \[\phi(Q)=[Q_1-\frac{Q_0P_1}{P_0}:\cdots:Q_{n+1}-\frac{Q_0P_{n+1}}{P_0}],\]
        where $P_i$ and $Q_i$, are the $i$th components of $P$ and $Q$, respectively (the coordinates
        are written as for a point in $\Proj^n$).
        It is easy to see that $\phi$
        pulls back regular functions to regular functions: given $g/h:\Proj^n\to k$, $g(\phi(Q))/h(\phi(Q))$
        is regular as well, since inserting $\phi(Q)$ (as above) will retain homogeneity as well as
        keep the denominator non-zero (as $h$ has no zeroes).
    \item The twisted cubic is given parametrically by $[x:y:z:w]=[t^3:t^2u:tu^2:u^3]$. We wish
        to project from $P=[0:0:1:0]$ onto the hyperplane $z=0$. This yields the points
        $[t^3:t^2u:u^3]\in\Proj^2$. Note that these points satisfy the equation $x_0^2x_2-x_1^3=0$.
        But this is precisely the projective closure of the cuspidal cubic $y^3=x^2$.
\end{enumerate}


\subsection*{Problem I.3.15}
\begin{enumerate}[(a)]
    \item Let $X\subset\A^n$ and $Y\subset\A^m$ be affine varieties. Consider the product
        $X\times Y\subset\A^{n+m}$ with the induced Zariski topology. Suppose that $X\times Y$
        is a union of two closed subsets $Z_1\cup Z_2$. Let $X_i=\left\{ x\in X\mid x\times Y\subset Z_i \right\}$
        for $i=1,2$. The irreducibility of $Y$ guarantees that $X_1\cup X_2=X$: if there were
        an $x$ for which $x\times Y$ were not contained in a $Z_i$, this would yield a
        covering of $Y$ by closed sets $Z_1\cap Y$ and $Z_2\cap Y$. Now consider the inclusion
        map $\iota:X\to X\times Y$; if $\iota$ is continuous then $X_i$ must be closed, as
        $\iota^{-1}(Z_i)=X_i$. But the inclusion is obviously continuous, as any closed set
        in $X\times Y$ is defined by the vanishing of polynomials $f_\alpha(x_1,\ldots,x_n,y_1,\ldots, y_m)$,
        whose pullback to $X$ is $f_\alpha(x_1,\ldots,x_n,0,\ldots,0)$, which is by definition
        a closed set of $X$. But if $X_i$ are closed and cover $X$, either $X_1=X$ or $X_2=X$
        and thus $Z_1=X\times Y$ or $Z_2=X\times Y$, i.e. $X\times Y$ is irreducible.
    \item Consider the homomorphism $\psi:A(X)\otimes_kA(Y)\to A(X\times Y)$ given by taking $(f\otimes g)(x,y)$
        to $f(x)g(y)$. This map is clearly onto, as it produces the coordinate functions
        $x_1,\ldots,x_n,y_1,\cdots,y_m$.\footnote{One might worry that generators may be missing from
        $A(X)$ or $A(Y)$ and hence that $\psi$ may not produce all the generators of $A(X\times Y)$.
        This is actually not a problem: if $x_i\in I(X)$ then $x_i\in I(X\times Y)$ as well.}

        Injectivity is more tricky. We start from the fact that we can find countable bases $\{f_i\}, \{g_j\}$ for $A(X), A(Y)$ respectively. Now we look at the kernel of $\psi$:
\[      \psi\big(\sum_{ij} c_{ij} f_i \otimes g_j \big) (x,y) = \sum_{ij} c_{ij} f_i(x) g_j(y) = 0, \forall x,y     \]
Now fix the value of $x$, and we obtain a relation that holds for every $y$:
\[       \sum_{ij} c_{ij} f_i(x_0) g_j(y) = 0     \]
Since $\{g_j(y)\}$ form a basis for $A[Y]$, the LHS is zero only if every coefficient is zero. Therefore $f_i(x_0) = 0$, and since this holds for each $x_0$, $f_i$ must be identically $0$. The same reasoning can be applied to show $g_j(y_0) = 0$ for each $y_0$. Therefore the kernel of $\psi$ is trivial.

For those more versed in category theory, there is a simpler but more indirect proof. The functor that associates to varieties their coordinate rings is contravariant, and therefore takes products to coproducts. But the coproduct in the category of rings is $\otimes$, which proves the statement.
    \item Let $\pi_X, \pi_Y$ denote the projections on $X$ and $Y$ respectively. Using lemma 3.6, these are morphisms as long as $x_i \circ \pi_X$ and $y_i \circ \pi_Y$ are regular functions on $X \times Y$. But $x_i \circ \pi_X (x, y) = x_i (x, 0) = x_i$, which is a polynomial function, thus regular. This works analogously for $\pi_Y$. Then we just need to check the universal property of products. Assume there exist morphisms $\phi_X :Z \to X$, $\phi_Y : Z \to Y$; then we construct the morphism $\phi_{XY} : Z \to X \times Y$ defined by $\phi_{XY} (z) = (\phi_X (z) , \phi_Y(z))$. We have $\pi_X \circ \phi_{XY} = \phi_X$, $\pi_Y \circ \phi_{XY} = \phi_Y$, and $\phi_{XY}$ is clearly unique with these properties.
    \item It suffices to show that $\dim A(X)\otimes_k A(Y)=\dim A(X)+\dim A(Y)$. By Noether
        normalization, $A(X)$ is module-finite over the polynomial ring $k[t_1,\ldots,t_{d_1}]$
        and $A(Y)$ is module-finite over the polynomial ring $k[s_1,\ldots,s_{d_2}]$ with
        $d_1=\dim A(X)$ and $d_2=\dim A(Y)$. In other words, every element of $A(X)$ or $A(Y)$
        is the solution to some polynomial over the above polynomial rings, respectively.
        Next note that $R=k[t_1,\ldots,t_{d_1}, s_1,\ldots,s_{d_2}]$ must inject into
        $A(X)\otimes_kA(Y)$ via a map $\phi$. 
        Recall that every element in the tensor product can be written as a sum of elementary tensors
        $x\otimes y$ with $x\in A(X),y\in A(Y)$. Hence every element in the tensor product must
        also solve some polynomial over the ring $R$, i.e. $A(X)\otimes_kA(Y)$ is module-finite
        over $R$ and $\dim A(X)\otimes_kA(Y)=d_1+d_2$, as desired.
\end{enumerate}

\subsection*{Problem I.3.17}
\begin{enumerate}[(a)]
    \item Any conic in $\Proj^2$ is isomorphic to $\Proj^1$ by problem I.3.1, and hence it
        suffices to show that $\Proj^1\subset\Proj^2$ is normal. If we parametrize the
        projective line by $x=0$, its coordinate ring becomes the graded ring $k[y,z]$.
        Then $A(Y)$ is a UFD, and it is straightforward to check that as is the degree-zero
        subring of any localization of $A(Y)$. Hence, by theorem I.3.4b, any conic
        in $\Proj^1$ is normal.
    \item 
    \item Consider the cuspidal cubic $C$ in $\A^2$ given by $y^2-x^3=0$. The ring of regular
        functions on $C$ is isomorphic to the coordinate ring $k[x,y]/(y^2-x^3)$. The local
        ring at $(0,0)$ is given by the localization
        \[\mathcal{O}_{(0,0),C}=\left( k[x,y]/(y^2-x^3) \right)_{(x,y)}=k[x,y]_{(x,y)}/(y^2-x^3).\]
        Now notice that the quotient $y/x$ sitting in the fraction field of $\mathcal{O}_{(0,0),C}$
        solves the monic polynomial $t^2-x\in\mathcal{O}_{(0,0),C}[t]$, but $y/x\notin\mathcal{O}_{(0,0),C}$.
        Hence $C$ is not normal.
    \item Let $Y$ be an affine variety with coordinate ring $A(Y)\cong\mathcal{O}(Y)$. Suppose
        first that $\mathcal{O}(Y)$ is normal (integrally closed in its field of fractions).
        Let us show that $Y$ is normal. It suffices to show
        that, more generally, the localization $S^{-1}A$ of a normal domain $A$ is normal.
        If $x$ is an element of the fraction field of $A$ integral over $S^{-1}A$, it must solve
        a polynomial
        \[x^n+\frac{a_{n+1}}{s_{n-1}}x^{n-1}+\cdots+\frac{a_0}{s_0}\]
        for $a_i\in A,s_0\in S$. If we denote by $r=s_0\cdots s_{n-1}$ the product of the $s_i$,
        and multiply by $r^n$, we obtain
        \[(rx)^n+\frac{a_{n-1}r}{s_{n-1}}(r^{n-1}x^{n-1})+\cdots+\frac{a_0r^n}{s_0}.\]
        This implies that $rx$ is integral over $A$, and so $rx\in A$ and $x\in S^{-1}A$.
        Thus, as $\mathcal{O}_{P,Y}$ is a localization of $\mathcal{O}(Y)$,
        which is normal, we find that $Y$ is normal.

        Now suppose instead that $Y$ is normal (i.e. $\mathcal{O}_{P,Y}$ is normal for every
        $P\in Y$). We wish to show that $\mathcal{O}(Y)$ is normal. We will actually show that
        if the localizations of a domain $A$ at all maximal ideals are integrally closed,
        then $A$ is integrally closed. This implies the result, since the coordinate ring
        of an affine variety is a domain. Recall that $A = \bigcap_{\fr m} A_{\fr m},$ 
        where $\fr m$ are all maximal ideals of $A$. Now if $r \in$ $\text{Frac }A$ is integral over
        $A$, then it's also integral over $A_{\fr m}$ for all $\fr m$, since coefficients in $A$
        are also in $A_{\fr m}$. But $A_{\fr m}$ is integrally closed, so $r \in A_{\fr m}$
        for all $\fr m$. Then $r \in \bigcap_{\fr m} A_{\fr m} = A$, so $A$ is integrally closed.
    \item Let $Y$ be an affine variety with $A(Y)\cong\mathcal{O}(Y)$ its coordinate ring.
        The integral closure $N$ of $\mathcal{O}(Y)$ in its field of fractions
        is of course a normal domain. By theorem I.3.9A, $N$ is a finitely generated
        $k$-algebra, and hence by the equivalence of categories of corollary I.3.8,
        we obtain a a variety $\tilde Y$ such that $\mathcal{O}(\tilde Y)=N$. Consider
        now a normal variety $Z$ with a dominant morphism $\phi:Z\to Y$.
        We claim that the induced map $\phi^*:\mathcal{O}(Y)\to\mathcal{O}(Z)$ is injective.
        To see this, note that $f\in\mathcal{O}(Y)$ is pulled back to regular function
        $f\circ \phi\in\mathcal{O}(Z)$.
        Note that if $f(\phi(X))=0$ then since $0\in\A^1$ is Zariski-closed, so is
        $f^{-1}(0)\supset\phi(X)$, by continuity of $f$. The density of $\phi(X)$ then implies that
        $f^{-1}(0)=Y$, and hence $f(Y)=0$, i.e. $f=0$. This shows that $\phi^*$
        is injective.
        Now, as $Z$ is normal, $\mathcal{O}(Z)$ is normal as well (by the previous part). Since
        $N$ is the ``smallest'' normal ring containing $\mathcal{O}(Y)$ (universal property
        of the normalization as rings), there is a unique
        injection $N\hookrightarrow\mathcal{O}(Z)$, which induces a (unique) morphism
        $Z\to Y$, just as desired.

\end{enumerate}

\subsection*{Problem I.3.21}
\begin{enumerate}[(a)]
    \item It suffices to show that the addition and inversion maps are morphisms of varieties.
        But this follows from Lemma 3.6, as $\mu(a,b)=a+b$ and $\iota(a)=-a$ clearly define
        regular functions.
    \item Note that $\G_m$ is, as a variety, simply $\A^1-\{0\}$, which in turn is isomorphic to 
        an affine variety (c.f. problem I.3.1). Hence $\G_m$ is an affine variety, and the
        multiplication and inversion maps are morphisms again by Lemma 3.6.
    \item We define the group operation $\cdot$ on $\Hom(X,G)$ as
        \[(f\cdot g)(x)=\mu(f(x),g(x)),\]
        where $f,g\in\Hom(X,G)$ and $\mu$ is the operation on $G$ and inversion as
        \[f^{-1}(x)=\iota(f(x)),\]
        where $\iota$ is the inversion on $G$. Thus defined, $\Hom(X,G)$ becomes a group
        by virtue of the group structure on $G$.
    \item By part (c), $\Hom(X,\G_a)$ inherits a group structure from $\G_a$, while the group
        structure on $\mathcal{O}(X)$ is the usual one. Any $f\in\Hom(X,\G_a)$ defines a regular
        function on $X$, and hence $f\in\mathcal{O}(X)$. Conversely, any regular function
        $\tilde f\in\mathcal{O}(X)$ is a morphism from $X$ to $\G_a=\A^1$ (by Lemma 3.1) and
        hence contained in $\Hom(X,\G_a)$. The set equality $\Hom(X,\G_a)=\mathcal{O}(X)$ clearly
        extends to a group isomorphism, as the additive structure is clearly preserved.
    \item By part (c), $\Hom(X,\G_m)$ inherits a group structure from $\G_m$, while the group
        of units $H$ in $\mathcal{O}(X)$ is the group of invertible, globally regular functions
        on $X$. Just as in part (d), we have the setwise equality $\Hom(X,\G_m)=H$, which extends
        to a group isomorphism, as the multiplicative structure is preserved.
\end{enumerate}

\end{document}
