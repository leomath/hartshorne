\documentclass{mathnotes}

\usepackage{tikz-cd}
\usepackage{todonotes}

\title{Selected Solutions to Hartshorne's \textit{Algebraic Geometry}\footnote{Solutions to the first chapter were written for a reading course with Professor A.~J. de Jong at Columbia during the spring semester of 2014.}}
\author{Matei Ionita and Nilay Kumar}
\date{Last updated: \today}


\begin{document}

\maketitle

\section*{CHAPTER I: Varieties}

\subsection*{Problem I.1.1}
\begin{enumerate}[(a)]
    \item Let $Y$ be the plane curve $y-x^2=0$. The coordinate ring $A(Y)=k[x,y]/(y-x^2)$
        is isomorphic to $k[x]$, as any power of $y$ is simply replaced by $x^2$.
    \item Let $Z$ be the plane curve $xy-1=0$. The corrdinate ring $A(Z)=k[x,y]/(xy-1)$
        is clearly not isomorphic to a polynomial ring of one variable, as there are
        non-constant elements of $A(Z)$ (namely, powers of $y$) that are invertible.
    \item We assume that the $\characteristic k\neq 2$.
        Let $f$ be an irreducible quadratic polynomial in $k[x,y]$, i.e.
        \[f(x,y)=x^2+axy+by^2+cx+dy+e,\]
        and let $W$ be the conic defined by $f$ (we can choose $f$ to be monic without
        loss of generality).
        
        Suppose the degree two terms are a perfect square.
        Then we may change variables to obtain $z^2+bz+dy+e$ (with new coefficients).
        Completing the square (here we use $\characteristic k\neq 2$) in $z$ and changing
        variables again, we obtain $w^2-y=0$, which yields the curve $Y$ from part
        (a) above.

        If the degree two terms do not factor perfectly, we can write $f$ as
\[       f(x,y) = g(x,y) h(x,y) + e(x,y)     \]
Where $g,h,e$ are linear polynomials, with $g,h$ distinct. Then we can change variables $\big( g(x,y) , h(x,y) \big) \to (x,y)  $, and we reduce the problem to
\[       f(x,y) = xy + cx + dy +e      \]
With yet another change of variables $(x+d, y+c) \to (x,y)$, this reduces to $f(x,y) = xy - 1$, which yields the curve from part (b).
\end{enumerate}

\subsection*{Problem I.1.2}
Let $Y\subset \A^3$ be the set $Y=\left\{ (t,t^2,t^3)\mid t\in k\right\}$.
Consider $\fr a=(y-x^2,z-x^3)\subset k[x,y,z]$. $\fr a \subset I(Y)$ is immediate, and the converse holds because $\fr a$ is prime. Indeed, $k[x,y,z]/\fr a \cong k[x]$, which is a domain. The coordinate ring is thus given by $A(Y)=k[x]$. Then $\dim Y = \dim k[x] = 1$.


\subsection*{Problem I.2.1}
If $x_0, \dots, x_n$ are homogenous coordinates on $\Proj^n$, they can also be regarded as affine coordinates on $\A^{n+1}$. Similarily, given the homogenous ideal $\fr a \subset S$, we consider the ideal $\fr a' \subset k[x_0, \dots, x_n]$ that contains the same elements as $\fr a$, viewed as functions on $\A^{n+1}$. Thus $f\in \fr a$ gives $f \in \fr a'$.
 Moreover, $f([a_0 , \dots, a_n]) = 0$ for some $[a_0, \dots, a_n] \in \Proj^n$ means that $f(\lambda a_0, \dots, \lambda a_n) = 0$ for all $\lambda \in k$. Therefore $Z(\fr a')$ is the affine cone $C\big(Z(\fr a)\big)$, and clearly $f(P) = 0$ for all $P \in Z(\fr a) \Leftrightarrow f(Q) = 0$ for all $Q \in C\big(Z(\fr a)\big)$. Then the Nullstellensatz gives $f^q \in \fr a'$ for some $q>0$, which means that $f^q \in \fr a$ for the same $q$.

\subsection*{Problem I.2.15}
\begin{enumerate}[(a)]
\item Consider the image of the Segre embedding:
\[     \big( [a:b] , [c:d]\big) \mapsto [ac : ad : bc : bd]    \]
Denote the four homogenous coordinates by $x, z, w, y$ in this order. We see that $xy - zw = 0$, so $\psi(\Proj^1 \times \Proj^1) \subset Q$. Conversely, for any $P = [x:z:w:y] \in Q$, we want to find $[a:b], [c:d] \in \Proj^1$ such that $P = \psi\big([a:b], [c:d] \big)$. At least one of $x,z,w,y$ is nonzero, and on a case by case basis we can construct an element of the preimage $\psi^{-1}(P)$. Assume that $x\neq 0$, then take $[a:b] = [x:w]$ and $[c:d] = [x:z]$. Then
\[        \psi\big([x:w], [x:z] \big) = [x^2 : xz : xw: wz] = [x: z: w: y]    \]
Where we used $x\neq 0$ to write $y = wz/x$. The other three cases work similarly.
\item For fixed values $a = \alpha, b = \beta$, the family $\{L_t\}$ of curves $\Proj^1 \to Q$ given by
\[       [c:d] \mapsto [\alpha c : \alpha d : \beta c : \beta d ] = [t c : t d : c : d]   \]
with $t=\alpha/\beta \in \Proj^1$, are actually lines, as their ideal in $\Proj^3$ is generated by linear polynomials: $(\beta x - \alpha w, \beta z - \alpha y)$. Similarly $\{M_u\}$ is the family of lines
\[         [a:b] \mapsto [\gamma a : \delta a : \gamma b : \delta b]   = [u a : a : ub:b]    \]
It's clear that $L_t \cap L_{t'} \neq \emptyset$ only if $t=t'$, and similarly for $M_u$. Now we look at $L_t \cap M_u$, for fixed $t,u$.
\[       (tc, td, c,d) = \lambda (ua, a, ub, b)      \]
\[    \Rightarrow   \begin{cases}      d = \lambda b \\ c = \lambda ub \\ d = \lambda a/t \\ c = \lambda a u/t        \end{cases}  \Rightarrow  \begin{cases} a = tb \\ c = \lambda ub \\ d = \lambda b \end{cases}  \]
This completely determines the homogenous coordinates of the intersection point, which is therefore unique.
\item In the product topology $\Proj^1 \times \Proj^1$, all nontrivial closed sets are finite unions of points and lines. Therefore it suffices to show that $Q$ in the subspace topology contains a closed curve that's not a line. Consider $\Proj^1 \to Q$ given by
\[    [t : u] \mapsto [t^3 : t^2 u : tu^2 : u^3]      \]
This curve is the vanishing in $Q$ of the homogenous degree 3 polynomial $z^3 - x^2y$. Its ideal in $\Proj^3$ is $(xy-zw, z^3 - x^2y)$, which cannot be generated by linear polynomials, hence the curve is not linear. 
\end{enumerate}

\subsection*{Problem I.3.1}
\begin{enumerate}[(a)]
    \item By the results of problem 1.1, we know that any conic in $\A^2$ can be written as either
        a variety $Y$ defined by $y-x^2=0$ or a variety $Z$ defined by $xy-1=0$. We know that
        $A(Y)=k[x]$ and $A(Z)=k[x,x^{-1}]$. Note that $A(Y)\cong A(\A^1)$, and hence by Corollary
        3.7, $Y\cong\A^1$ as affine varieties. It remains to show that $Z$ is isomorphic to
        $\A^1-\{0\}$. Note first that $xy-1=0$ can be parametrized as $(t,t^{-1})$, which
        suggests the map $\phi:Z\to\A^1-\{0\}$ given by $\phi(t,t^{-1})=t$ as well as the reverse
        $\psi:\A^1-\{0\}\to Z$ given by $\psi(x)=(x,x^{-1})$. It is easy to check $\phi$ and $\psi$
        are morphisms with $\psi\circ\phi=\id_Z$ and $\phi\circ\psi=\id_{\A^1-\{0\}}$.
    \item Let $B$ be a proper open subset of $\A^1$. By definition of the Zariski topology, we can
        write $B=\A^1\setminus\{p_1,\ldots, p_n\}$ where $p_i$ are a finite set of points in $\A^1$.
        The ring of regular functions of $\A^1$ is $\mathcal{O}(\A^1)=k[x]$. In $B$, however,
        polynomials that vanish only at any of the $p_i$ are globally invertible, and hence
        $\mathcal{O}(B)=k[x,(x-p_1)^{-1},\ldots,(x-p_n)^{-1}]$. These two rings are clearly
        not isomorphic, which completes the proof.
    \item In the projective plane, we can write a conic as $F(x,y,z)=ax^2+2bxy+2cxz+dy^2+2eyz+fz^2$,
        which can be rewritten under an appropriate change of variables as $x^2+y^2+z^2$\todo{do this} (assuming
        $\characteristic k\neq 2$). Hence every
        conic in the projective plane is isomorphic, and it will suffice to show that there exists
        a conic that is isomorphic to $\Proj^1$.
        This follows From the result of exercise I.3.4: the $2$-uple embedding 
        $\rho_2:\Proj^1\to\Proj^2$ is an isomorphism onto its image
        \[\rho_2(a_0,a_1)=(a_0^2,a_0a_1,a_1^2),\]
        which clearly traces out a conic $xz-y^2$.
    \item This is hard!! \todo{finish}
    \item If an affine variety $X$ is isomorphic to a projective variety $Y$, then we must have
        that $\mathcal{O}(X)=\mathcal{O}(Y)=k$. But for $k[x_1,\ldots,x_n]/I(X)=k$, $I(X)$
        must be maximal. Hence $I(X)=(x_1-a_1,\ldots,x_n-a_n)$, i.e. $X$ is just a point.
\end{enumerate}

\subsection*{Problem I.3.12}
We can fix an affine open $U$ containing $P$ (by Proposition 4.3) and thus reduce to the affine case.
Then $\mathcal{O}_P\cong A(X)_{\fr m_P}$ and $\dim \mathcal{O}_P=\dim X$ by Theorem 3.2.


\subsection*{Problem I.3.14}
\begin{enumerate}[(a)]
    \item Note first that $\phi$ is continuous, as the preimage of any closed subset $V\subset \Proj^n$
        is the projective cone $\overline{C(V)}$, which is closed in $\Proj^{n+1}$. 
        Furthermore, the point at which the line connecting any $Q$ and $P$ to the hypersurface
        (choose $x_0=0$ without loss of generality) is given by 
        \[\phi(Q)=[Q_1-\frac{Q_0P_1}{P_0}:\cdots:Q_{n+1}-\frac{Q_0P_{n+1}}{P_0}],\]
        where $P_i$ and $Q_i$, are the $i$th components of $P$ and $Q$, respectively (the coordinates
        are written as for a point in $\Proj^n$).
        It is easy to see that $\phi$
        pulls back regular functions to regular functions: given $g/h:\Proj^n\to k$, $g(\phi(Q))/h(\phi(Q))$
        is regular as well, since inserting $\phi(Q)$ (as above) will retain homogeneity as well as
        keep the denominator non-zero (as $h$ has no zeroes).
    \item The twisted cubic is given parametrically by $[x:y:z:w]=[t^3:t^2u:tu^2:u^3]$. We wish
        to project from $P=[0:0:1:0]$ onto the hyperplane $z=0$. This yields the points
        $[t^3:t^2u:u^3]\in\Proj^2$. Note that these points satisfy the equation $x_0^2x_2-x_1^3=0$.
        But this is precisely the projective closure of the cuspidal cubic $y^3=x^2$.
\end{enumerate}


\subsection*{Problem I.3.15}
\begin{enumerate}[(a)]
    \item Let $X\subset\A^n$ and $Y\subset\A^m$ be affine varieties. Consider the product
        $X\times Y\subset\A^{n+m}$ with the induced Zariski topology. Suppose that $X\times Y$
        is a union of two closed subsets $Z_1\cup Z_2$ with $Z_i=Z(I_i)$.
        Let $X_i=\left\{ x\in X\mid x\times Y\subset Z_i \right\}$
        for $i=1,2$. The irreducibility of $Y$ guarantees that $X_1\cup X_2=X$: if there were
        an $x$ for which $x\times Y$ were not contained in a $Z_i$, this would yield a
        covering of $Y$ by closed sets $Z_1\cap Y$ and $Z_2\cap Y$.
        Next note that the $X_i$ are closed; in particular, $X_i=Z(I_i')$ where
        \[I_i'=\left\{ f(x,y')\in\C[x_1,\ldots,x_n\mid f\in I_i, y'\in Y \right\}.\]
        This is because
        \begin{align*}
            x\in Z(I_i')&\iff f(x,y')=0, \forall f\in I_i, y'\in Y\\
            &\iff (x,y')\in Z(I_i), \forall y'\in Y\\
            &\iff \{x\}\times Y\subset Z(I_i)\\
            &\iff x\in X_i.
        \end{align*}
        But if $X_i$ are closed and cover $X$, either $X_1=X$ or $X_2=X$
        and thus $Z_1=X\times Y$ or $Z_2=X\times Y$, i.e. $X\times Y$ is irreducible\footnote{This argument is due to Sicong Zhang}.
    \item Consider the homomorphism $\psi:A(X)\otimes_kA(Y)\to A(X\times Y)$ given by taking $(f\otimes g)(x,y)$
        to $f(x)g(y)$. This map is clearly onto, as it produces the coordinate functions
        $x_1,\ldots,x_n,y_1,\cdots,y_m$.\footnote{One might worry that generators may be missing from
        $A(X)$ or $A(Y)$ and hence that $\psi$ may not produce all the generators of $A(X\times Y)$.
        This is actually not a problem: if $x_i\in I(X)$ then $x_i\in I(X\times Y)$ as well.}

        Injectivity is more tricky. We start from the fact that we can find countable bases $\{f_i\}, \{g_j\}$ for $A(X), A(Y)$ respectively. Now we look at the kernel of $\psi$:
\[      \psi\big(\sum_{ij} c_{ij} f_i \otimes g_j \big) (x,y) = \sum_{ij} c_{ij} f_i(x) g_j(y) = 0, \forall x,y     \]
Now fix the value of $x$, and we obtain a relation that holds for every $y$:
\[       \sum_{ij} c_{ij} f_i(x_0) g_j(y) = 0     \]
Since $\{g_j(y)\}$ form a basis for $A[Y]$, the LHS is zero only if every coefficient is zero. Therefore $f_i(x_0) = 0$, and since this holds for each $x_0$, $f_i$ must be identically $0$. The same reasoning can be applied to show $g_j(y_0) = 0$ for each $y_0$. Therefore the kernel of $\psi$ is trivial.

For those more versed in category theory, there is a simpler but more indirect proof. The functor that associates to varieties their coordinate rings is contravariant, and therefore takes products to coproducts. But the coproduct in the category of rings is $\otimes$, which proves the statement.
    \item Let $\pi_X, \pi_Y$ denote the projections on $X$ and $Y$ respectively. Using lemma 3.6, these are morphisms as long as $x_i \circ \pi_X$ and $y_i \circ \pi_Y$ are regular functions on $X \times Y$. But $x_i \circ \pi_X (x, y) = x_i (x, 0) = x_i$, which is a polynomial function, thus regular. This works analogously for $\pi_Y$. Then we just need to check the universal property of products. Assume there exist morphisms $\phi_X :Z \to X$, $\phi_Y : Z \to Y$; then we construct the morphism $\phi_{XY} : Z \to X \times Y$ defined by $\phi_{XY} (z) = (\phi_X (z) , \phi_Y(z))$. We have $\pi_X \circ \phi_{XY} = \phi_X$, $\pi_Y \circ \phi_{XY} = \phi_Y$, and $\phi_{XY}$ is clearly unique with these properties.
    \item It suffices to show that $\dim A(X)\otimes_k A(Y)=\dim A(X)+\dim A(Y)$. By Noether
        normalization, $A(X)$ is module-finite over the polynomial ring $k[t_1,\ldots,t_{d_1}]$
        and $A(Y)$ is module-finite over the polynomial ring $k[s_1,\ldots,s_{d_2}]$ with
        $d_1=\dim A(X)$ and $d_2=\dim A(Y)$. In other words, every element of $A(X)$ or $A(Y)$
        is the solution to some polynomial over the above polynomial rings, respectively.
        Next note that $R=k[t_1,\ldots,t_{d_1}, s_1,\ldots,s_{d_2}]$ must inject into
        $A(X)\otimes_kA(Y)$ via a map $\phi$. 
	Now we want to show that $A(X) \otimes_k A(Y)$ is module finite over $R$, which would imply
	that their dimensions are equal. It suffices to show that every element of $A(X) \otimes_k A(Y)$
	is integral over $R$. It's easy to see that elementary tensors $a\otimes 1, 1\otimes b$ are integral,
	as they solve the same polynomials that $a, b$ solve. Integral elements form a subring 
	of $A(X) \otimes_k A(Y)$, and $a\otimes 1, 1\otimes b$ generate the whole tensor product as a ring.
        Hence the tensor product is integral over $R$.
\end{enumerate}

\subsection*{Problem I.3.17}
\begin{enumerate}[(a)]
    \item Any conic in $\Proj^2$ is isomorphic to $\Proj^1$ by problem I.3.1, and hence it
        suffices to show that $\Proj^1\subset\Proj^2$ is normal. If we parametrize the
        projective line by $x=0$, its coordinate ring becomes the graded ring $k[y,z]$.
        Then $A(Y)$ is a UFD, and it is straightforward to check that as is the degree-zero
        subring of any localization of $A(Y)$. Hence, by theorem I.3.4b, any conic
        in $\Proj^1$ is normal.
    \item 
    \item Consider the cuspidal cubic $C$ in $\A^2$ given by $y^2-x^3=0$. The ring of regular
        functions on $C$ is isomorphic to the coordinate ring $k[x,y]/(y^2-x^3)$. The local
        ring at $(0,0)$ is given by the localization
        \[\mathcal{O}_{(0,0),C}=\left( k[x,y]/(y^2-x^3) \right)_{(x,y)}=k[x,y]_{(x,y)}/(y^2-x^3).\]
        Now notice that the quotient $y/x$ sitting in the fraction field of $\mathcal{O}_{(0,0),C}$
        solves the monic polynomial $t^2-x\in\mathcal{O}_{(0,0),C}[t]$, but $y/x\notin\mathcal{O}_{(0,0),C}$.
        Hence $C$ is not normal.
    \item Let $Y$ be an affine variety with coordinate ring $A(Y)\cong\mathcal{O}(Y)$. Suppose
        first that $\mathcal{O}(Y)$ is normal (integrally closed in its field of fractions).
        Let us show that $Y$ is normal. It suffices to show
        that, more generally, the localization $S^{-1}A$ of a normal domain $A$ is normal.
        If $x$ is an element of the fraction field of $A$ integral over $S^{-1}A$, it must solve
        a polynomial
        \[x^n+\frac{a_{n+1}}{s_{n-1}}x^{n-1}+\cdots+\frac{a_0}{s_0}\]
        for $a_i\in A,s_0\in S$. If we denote by $r=s_0\cdots s_{n-1}$ the product of the $s_i$,
        and multiply by $r^n$, we obtain
        \[(rx)^n+\frac{a_{n-1}r}{s_{n-1}}(r^{n-1}x^{n-1})+\cdots+\frac{a_0r^n}{s_0}.\]
        This implies that $rx$ is integral over $A$, and so $rx\in A$ and $x\in S^{-1}A$.
        Thus, as $\mathcal{O}_{P,Y}$ is a localization of $\mathcal{O}(Y)$,
        which is normal, we find that $Y$ is normal.

        Now suppose instead that $Y$ is normal (i.e. $\mathcal{O}_{P,Y}$ is normal for every
        $P\in Y$). We wish to show that $\mathcal{O}(Y)$ is normal. We will actually show that
        if the localizations of a domain $A$ at all maximal ideals are integrally closed,
        then $A$ is integrally closed. This implies the result, since the coordinate ring
        of an affine variety is a domain. Recall that $A = \bigcap_{\fr m} A_{\fr m},$ 
        where $\fr m$ are all maximal ideals of $A$. Now if $r \in$ $\text{Frac }A$ is integral over
        $A$, then it's also integral over $A_{\fr m}$ for all $\fr m$, since coefficients in $A$
        are also in $A_{\fr m}$. But $A_{\fr m}$ is integrally closed, so $r \in A_{\fr m}$
        for all $\fr m$. Then $r \in \bigcap_{\fr m} A_{\fr m} = A$, so $A$ is integrally closed.
    \item Let $Y$ be an affine variety with $A(Y)\cong\mathcal{O}(Y)$ its coordinate ring.
        The integral closure $N$ of $\mathcal{O}(Y)$ in its field of fractions
        is of course a normal domain. By theorem I.3.9A, $N$ is a finitely generated
        $k$-algebra, and hence by the equivalence of categories of corollary I.3.8,
        we obtain a a variety $\tilde Y$ such that $\mathcal{O}(\tilde Y)=N$. Consider
        now a normal variety $Z$ with a dominant morphism $\phi:Z\to Y$.
        We claim that the induced map $\phi^*:\mathcal{O}(Y)\to\mathcal{O}(Z)$ is injective.
        To see this, note that $f\in\mathcal{O}(Y)$ is pulled back to regular function
        $f\circ \phi\in\mathcal{O}(Z)$.
        Note that if $f(\phi(X))=0$ then since $0\in\A^1$ is Zariski-closed, so is
        $f^{-1}(0)\supset\phi(X)$, by continuity of $f$. The density of $\phi(X)$ then implies that
        $f^{-1}(0)=Y$, and hence $f(Y)=0$, i.e. $f=0$. This shows that $\phi^*$
        is injective.
        Now, as $Z$ is normal, $\mathcal{O}(Z)$ is normal as well (by the previous part). Since
        $N$ is the ``smallest'' normal ring containing $\mathcal{O}(Y)$ (universal property
        of the normalization as rings), there is a unique
        injection $N\hookrightarrow\mathcal{O}(Z)$, which induces a (unique) morphism
        $Z\to Y$, just as desired.

\end{enumerate}

\subsection*{Problem I.3.20}
\begin{enumerate}[(a)]
    \item Fix an affine open $U$ containing $P$. Then $\mathcal{O}(U)_{\fr m_P}\cong \mathcal{O}(Y)_{\fr m_P}$
        is a normal Noetherian local ring, and by the Stacks Project Tag 031T, we can write
        \[ \mathcal{O}(U)_{\fr m_P}=\bigcap_{\textrm{ht}(\fr p)=1}(\mathcal{O}(U)_{\fr m_P})_{\fr p}=\bigcap_{\substack{\textrm{ht}(\fr p')=1\\\fr p'\subset \fr m_P}}\mathcal{O}(U)_{\fr p'}.\]
        Note that we have replaced $\fr p\mathcal{O}(U)_{\fr m_P}$ by $\fr p'$ because primes in
        $\mathcal{O}(U)_{\fr m_P}$ are in one-to-one correspondence with primes of $\mathcal{O}(U)$
        containing $\fr m_P$. Moreover, $\fr m_P$ is maximal and hence
        has the same dimension as $\mathcal{O}(U)$, which implies that this correspondence is
        height-preserving, allowing us to write the intersection as above. Now note that the height 1
        primes of $\mathcal{O}(U)$ are in one-to-one correspondence with the codimension 1
        subvarieties of $U$ containing $P$ (c.f. Hartshorne I.3.13). The given function $f$
        is regular on $U-P$, and hence given any point $Q\neq P$ on a subvariety $\fr q$ (passing
        through $P$), we can find
        an open set $V$ of the subvariety on which $f$ can be expressed as a fraction $g/h$ with
        $g,h\in \mathcal{O}(U)$. Note, however, that $h\notin\fr q$, as otherwise $h$ would
        vanish identically on the subvariety. This contradicts that $f$ is regular on $V$
        and hence $f\in\mathcal{O}(U)_{\fr q}$, and by the equation above, $f\in\mathcal{O}(U)_{\fr m_P}$.
        \todo{check this}
    \item
\end{enumerate}

\subsection*{Problem I.3.21}
\begin{enumerate}[(a)]
    \item It suffices to show that the addition and inversion maps are morphisms of varieties.
        But this follows from Lemma 3.6, as $\mu(a,b)=a+b$ and $\iota(a)=-a$ clearly define
        regular functions.
    \item Note that $\G_m$ is, as a variety, simply $\A^1-\{0\}$, which in turn is isomorphic to 
        an affine variety (c.f. problem I.3.1). Hence $\G_m$ is an affine variety, and the
        multiplication and inversion maps are morphisms again by Lemma 3.6.
    \item We define the group operation $\cdot$ on $\Hom(X,G)$ as
        \[(f\cdot g)(x)=\mu(f(x),g(x)),\]
        where $f,g\in\Hom(X,G)$ and $\mu$ is the operation on $G$ and inversion as
        \[f^{-1}(x)=\iota(f(x)),\]
        where $\iota$ is the inversion on $G$. Thus defined, $\Hom(X,G)$ becomes a group
        by virtue of the group structure on $G$.
    \item By part (c), $\Hom(X,\G_a)$ inherits a group structure from $\G_a$, while the group
        structure on $\mathcal{O}(X)$ is the usual one. Any $f\in\Hom(X,\G_a)$ defines a regular
        function on $X$, and hence $f\in\mathcal{O}(X)$. Conversely, any regular function
        $\tilde f\in\mathcal{O}(X)$ is a morphism from $X$ to $\G_a=\A^1$ (by Lemma 3.1) and
        hence contained in $\Hom(X,\G_a)$. The set equality $\Hom(X,\G_a)=\mathcal{O}(X)$ clearly
        extends to a group isomorphism, as the additive structure is clearly preserved.
    \item By part (c), $\Hom(X,\G_m)$ inherits a group structure from $\G_m$, while the group
        of units $H$ in $\mathcal{O}(X)$ is the group of invertible, globally regular functions
        on $X$. Just as in part (d), we have the setwise equality $\Hom(X,\G_m)=H$, which extends
        to a group isomorphism, as the multiplicative structure is preserved.
\end{enumerate}


\subsection*{Problem I.4.1}
We define a function $h$ piecewise on $U \cup V$, by the rules $h(x) = f(x)$ for $x \in U$ and
 $h(x) = g(x)$ for $x \in V$. This is well-defined, since $f$ and $g$ agree on $U \cap V$. Regularity 
is defined pointwise, and $h$ is regular at all $x\in U$ because $f$ is, and similarly for $x \in V$. 
Therefore $h$ is regular on $U \cup V$.

If $f:X \to \A^1$ a rational map, then there are opens $U_{\alpha} \in X$ such that 
$f|_{U_{\alpha}} \to \A^1$ is a morphism. But morphisms to $\A^1$ are just regular functions. 
Therefore we use the first part of this problem repeatedly to define a regular function on 
$\bigcup_{\alpha} U_{\alpha}$. This is the largest open on which $f$ is a morphism, because 
it contains each other open as a subset.

\subsection*{Problem I.4.2}
Suppose $X$ and $Y$ are two varieties, with $U$ and $V$ open subsets on $X$. Consider morphisms
$f:U\to Y$ and $g:V\to Y$ with $f=g$ on $U\cap V$. Then we define a map $h:U\cup V\to Y$ by
$h(x)=f(x)$ for $x\in U$ and $h(x)=g(x)$ for $x\in V$. We check that $h$ is a morphism.
The image of $h$ is the union of the images of
$f$ and $g$ and thus $h$ is continuous, as the preimage of an open will be a union of opens by
continuity of $f$ and $g$. Moreover, note that a regular function $\phi:\tilde Y\to k$ for $\tilde Y\subset Y$
open is regular at each point of $\tilde Y$. Since $f$ and $g$ are morphisms, $\phi(f(p))$ 
and $\phi(g(p))$ are regular at every point of $f^{-1}(\tilde Y)$ and $g^{-1}(\tilde Y)$ respectively. But every point in $h^{-1}(\tilde Y)$
is either in $f^{-1}(\tilde Y)$ or in $g^{-1}(\tilde Y)$, so we see that $h$ also pulls regular functions on 
$\tilde Y$ back to regular functions on $h^{-1}(\tilde Y)$, and $h$ must be a morphism.

Now let $\phi:X\to Y$ be a rational map. Then there are open sets $U_\alpha\subset X$ such that
$\phi|_{U_\alpha}\to Y$ is a morphism. Applying the results from the previous paragraph to the open
$\tilde U=\cup_\alpha U_\alpha$, we find that $\phi|_{\tilde U}\to Y$ is a morphism. Clearly
$\tilde U$ is the largest open set on which $\phi$ is represented by a morphism.

\subsection*{Problem I.4.3}
\begin{enumerate}[(a)]
    \item Let $f$ be the rational function on $\Proj^2$ given by $f=x_1/x_0$. Then $f$ is defined
        (in the sense of the previous problem) on the open set $\Proj_0$ of $\Proj^2$ isomorphic to $\A^2$
        where $x_0\neq 0$. It is not obvious that $f$ cannot be defined at $[0:0:1]\in\Proj^2$; to see
        this, note that if there were some open set $U\subset\Proj^2$ containing $[0:0:1]$ on which
        there existed an $f'=g(x_0,x_1,x_2)/h(x_0,x_1,x_2)$ for some $g,h$ with $h\neq 0$, and $f'=f$
        on $U\cap\Proj_0$, then $x_0g=x_1h$ (on the overlap), i.e. $x_0|h, x_1|g$,
        implying that $h$ would vanish at $[0:0:1]$, which is a contradiction. Of course, on the affine
        open that $f$ is regular, $f:\Proj_0\to k$ is given by $f(x_0,x_1,x_2)=f(1,x_1/x_0,x_2/x_0)=x_1/x_0$,
        which we can also write as a projection onto the first affine factor $f(a_1,a_2)=a_1$.
    \item Now consider $f$ as a rational map from $\Proj^2$ to $\Proj^1$, where the field $k$ is
        embedded as the affine line. Note that $(f,\Proj_0)\sim(f',\Proj^2-[0:0:1])$ as a rational map
        with $f'(x_0,x_1,x_2)=[x_1:x_0]$, as the two clearly agree on their intersection $\Proj_0$.
        By an argument exactly as in part (a), it is easy to see that there is no rational map
        extending $f'$ to all of $\Proj^2$. Hence $f$ is now defined on $\Proj^2-[0:0:1]$, and on
        this open, is given by $f'$.
\end{enumerate}

\subsection*{Problem I.4.4}

\begin{enumerate}[(a)]
    \item Any conic in $\Proj^2$ is isomorphic to $\Proj^1$, by problem I.3.1, and hence
        rational.
    \item Consider the cuspidal cubic $Z$ defined by $y^2=x^3$. We claim that $Z$ is birationally
        equivalent to $\Proj^1$; it is in fact easy to define the explicit birational map.
        Define the rational map $\phi:Z\to\Proj^1$ on the open set $U=\{(x,y)\in Z\mid x\neq 0\}$ by
        $\phi(x,y)=y/x$ and the rational map $\psi:\Proj^1\to Z$ on the open $V=\{[t:s]\in\Proj^1\mid s\neq0,t\neq 0\}$
        by (after scaling) $\psi(t,1)=(t^2,t^3)$. We find that $\phi\circ\psi=\id_{\Proj^1}$ and
        $\psi\circ\phi=\id_{Z}$, so we are done.
    \item \todo{finish}
\end{enumerate}

\subsection*{Problem I.4.5}
Note that $\Proj^2$ is birational to $\A^2$, so it suffices to show that $Q$ is birational
to the affine open $\A^2$ in $\Proj^2$. This is done by defining the projection $p:Q\to\Proj^2$
by $p(x,y,z,w)=[x/w:y/w]$ whereever $w\neq 0$, and its inverse $i:\Proj^2\to Q$ by
$i(x,y,1)=[1:x:y:xy]$, whereever $x\neq0$ and $y\neq 0$. Note, however, that $Q$ is not isomorphic
to $\Proj^2$, as any two lines in $\Proj^2$ intersect, whereas there exist skew lines on $Q$,
by problem I.2.15.

\subsection*{Problem I.4.6}
\begin{enumerate}[(a)]
\item By explicit computation:
	\[     \phi^2 [a_0 : a_1 : a_2] = \phi [a_1a_2 : a_0a_2 : a_0 a_1] = 
	[a_0^2 a_1 a_2 : a_0a_1^2a_2 : a_0a_1a_2^2] = [a_0 : a_1 : a_2]      \]
	In order to rescale by $a_0a_1a_2$ in the last step, we need all of them to be nonzero. Let $U$ be 
	the open where no coordinate is 0, then $\phi : U \to U$ is an isomorphism. (It's easy to see that $\phi$
	surjects onto $U$; we simply rescale by $a_1a_2$.) Then $\phi : \Proj^2 \to \Proj^2$ is birational.
\item From part (a) $U = V = \{ x_0, x_1, x_2 \neq 0\}$.
\item $\phi = \phi^{-1}$, so it suffices describe $\phi$. It's well-defined on $\Proj^2 - \{[1:0:0],[0:1:0],[0:0:1]\}$,
	and it's undefined at the remaining three points. By the previous parts, $\phi : U \to U$ is an isomorphism, so
	we need only describe $\phi$ on the lines $\{x_i = 0\}$. Clearly $\phi(\{x_0 = 0\}) = [1:0:0]$, and similarly
	for the other two. We conclude that $\phi$ is an automorphism on $U$, and collapses each of the projective lines
	$\{x_i = 0\}$ to a point.
\end{enumerate}

\subsection*{Problem I.4.7}
Consider the given isomorphism $\phi:\mathcal{O}_{X,P}\to\mathcal{O}_{Y,Q}$. If we choose an affine open
$P\ni U\subset X$ and any open $Q\ni V\subset Y$, we find that $\mathcal{O}_{X,P}=\mathcal{O}_{U,P}$ and
$\mathcal{O}_{Y,Q}=\mathcal{O}_{V,Q}$. If we denote by $\mathcal{O}(U)$ and $A(V)$ the rings of regular
functions on $U$ and $V$, respectively, we can write
\begin{equation*}
    \begin{tikzcd}
        \mathcal{O}_{U,P}\arrow{r}{\sim}&\mathcal{O}_{V,Q}\\
        \mathcal{O}(U)\arrow[hook]{u}&A(V)\arrow[hook]{u}
    \end{tikzcd}
\end{equation*} \todo{finish this}


\subsection*{Problem I.4.10}
We look at the total preimage of $Y$ in the blowing up of $\A^2$; it's given by the solution to
\begin{align*}
y^2 &= x^3 \\
xu &= ty
\end{align*}
We analyze the affine opens $t\neq 0$ and $u\neq 0$ of $\Proj^1$ separately. On $t\neq 0$, we set $t=1$ 
and the second equation becomes $y = ux$. Plugging this in the first equation gives $x^2(x-u^2) =0$. The solution
$x=0$ gives $(0,0,u,1)$, which is the exceptional curve $E$. The solution $x = u^2$ gives $(u^2, u^3, u, 1)$ which
gives a parametrization of $\tilde Y$, the blowing up of $Y$. Now we should look at the other affine open, $u\neq 0$.
However, we are only interested in what happens at $t=0$, because this is the only point that we haven't captured
in our analysis of the affine open $t\neq 0$, and it's easy to see that $t=0$ doesn't give any more points on $\tilde Y$.
It follows, then, that there is only one point of intersection of $E$ and $\tilde Y$, specifically $(0,0,0,1)$:
\[     (u^2, u^3, u, 1) = (0, 0, u, 1) \Rightarrow u=0        \]
Since $\tilde Y$ is completely contained in one affine piece of $\A^2 \times \Proj^1$, we can just regard it as a subvariety
of $\A^3$. As such, the isomorphism with $\A^1$ is obvious:
\[         (u^2, u^3, u, 1) \mapsto u     \]
The morphism $\phi : \tilde Y \to Y$ is given by
\[         (u^2, u^3, u, 1) \mapsto  (u^2, u^3)     \]
Its inverse is not a morphism because the regular function $u$ on some neighborhood of $(0,0,0,1)$ is not regular in any
neighborhood of $(0,0) \in Y$.


\subsection*{Problem I.5.1}

\begin{enumerate}[(a)]
    \item Consider the curve in $\A^2$ given by $x^2=x^4+y^4$. Setting the $x$ and $y$ derivatives to zero
        yields the points $(0,0)$ and $(\pm 1/\sqrt{2},0)$. It is easy to see that of these, only $(0,0)$ lies
        on the curve, and hence is the only singular point. The curve corresponds to the tacnode singularity
        in Figure 4, which is clear by the symmetry.
    \item Consider $xy=x^6+y^6$. Setting derivatives equal to zero, we find that $y-6x^5=0$ and $x-6y^5=0$.
        One can check that the only singularity is at $(0,0)$.
        The equation of the curve remains invariant under $x\mapsto -x,y\mapsto -y$, and hence corresponds to
        the node singularity in Figure 4.
    \item Consider $x^3=y^2+x^4+y^4$. Setting derivatives equal to zero, we find $3x^2-4x^3=0$ and $2y+4y^3=0$.
        This yields $x=0,3/4$ and $y=0,\pm i/\sqrt{2}$, but none of these combinations lie on the curve except
        for $(0,0)$. This curve corresponds to the cusp singularity in Figure 4, because from the equation, we
        see that $x^3$ must be positive, i.e. $x$ must be positive.
    \item Consider $x^2y+xy^2=x^4+y^4$. Setting derivatives equal to zero, we find $2xy+y^2-4x^3=0$ and
        $x^2+2xy-4y^3=0$. One can check that the only singularity is at $(0,0)$. This curve corresponds to the
        triple point singularity in Figure 4.
\end{enumerate}

\subsection*{Problem I.5.2}
\begin{enumerate}[(a)]
\item Setting the partial derivatives equal to zero gives
	\begin{align*}
	y^2 &= 0   \\
	2xy &= 0 \\
	-2z &= 0  \end{align*}
	The solution is $(x,0,0)$ for any $x$, and all these points are easily seen to belong to the surface. This is the
	third picture in Figure 5, the variety on a skewer.
\item In this case all three partial derivatives are linear, so setting them equal to 0 gives the unique point $P =(0,0,0)$.
	Clearly $P$ belongs to the surface, so it's the unique singular point. This means it must be the conical double
	point.
\item The polynomial $xy + x^3 + y^3$ is $z$-independent, therefore the variety is symmetric with respect to 
	$z$ translations. Cancelling the $x, y$ partial derivatives gives
	\begin{align*}
	y+3x^2 &= 0  \\
	x+3y^2 &= 0 \end{align*}
    The solutions to this are $(0,0), (-1/3,-1/3), (1/3 e^{i2\pi/3}, 1/3 e^{i5\pi/3}), (1/3 e^{i5\pi/3}, 1/3 e^{i2\pi/3})$.
    However, only $(0,0)$ lies on the surface, therefore the singular locus is $(0,0,z)$. This is the double line in Figure 5.
\end{enumerate}

\subsection*{Problem 1.5.3}
\begin{enumerate}[(a)]
\item Using the definition of singular points in terms of the matrix of partial derivatives of $f$, and the 
	fact that $P = (0,0)$, we see that $Df|_P \neq 0 \Leftrightarrow f$ contains linear terms $\Leftrightarrow 
	f_1 \neq 0$.
\item For the node, the multiplicity is 2, and the tangent directions are $x=0$ and $y=0$. For the triple point, 
	the multiplicity is 3, and the tangent directions are $x=0, y=0, x+y = 0$. For the cusp, there is only one 
	tangent direction, $y=0$, with multiplicity 2. For the tacnode, there is one tangent direction, $x=0$, with 
	multiplicity 2.
\end{enumerate}

\subsection*{Problem I.5.4}
\begin{enumerate}[(a)]
    \item Let us first show that $(Y\cdot Z)_P$ is finite. We provide two proofs. First note that $\mathcal{O}_P/(f,g)$
        is a Noetherian local domain of dimension zero (as it is obtained by successive quotients by nonzerodivisors).
        By Tag 00KJ of the Stacks Project, we find that $\mathcal{O}_P/(f,g)$ has finite length as an $\mathcal{O}_P/(f,g)$-module,
        which implies that $\mathcal{O}_P/(f,g)$ has finite length as a $\mathcal{O}_P$-module, which completes the proof.

        For another proof, consider the following. We first state a basic algebra fact that will be useful: the length
        of $\mathcal{O}_P/(f,g)$ as an $\mathcal{O}_P$-module agrees with the dimension of $\mathcal{O}_P/(f,g)$ as a
        (finite-dimensional) $k$-vector space\todo{understand}. Furthermore, since $A=k[x,y]/(f,g)$ is the coordinate ring
        of a finite set of (intersection) points $P_i$, it is isomorphic to the direct sum of the localizations of $A$ at the maximal
        of every point\footnote{See Fulton's \textit{Algebraic Curves}, section 2.9 proposition 6}.
        As $A$ is finite-dimensional as a $k$-vector space, the localizations $\mathcal{O}_{P_i}/(f,g)$ must be finite-dimensional,
        which completes the proof.

        We now follow Fulton\footnote{See Ibid, section 3.3 theorem 3 property 5} in proving that $(Y\cdot Z)_P\geq \mu_P(Y)\mu_P(Z)$.
        Consider the following diagram of vector spaces and linear maps, where $\fr m=(x,y), r=\mu_P(Y),$ and $s=\mu_P(Z)$,
        \begin{equation*}
            \begin{tikzcd}
                k[x,y]/\fr m^r\times k[x,y]/\fr m^s \ar{r}{\psi} & k[x,y]/\fr m^{r+s} \ar{r}{\phi} & k[x,y]/(\fr m^{r+s},f,g)\ar{d}{\alpha} \ar{r} & 0\\
                & \mathcal{O}_P/(f,g) \ar{r}{\pi} & \mathcal{O}_P/(\fr m^{r+s}, f,g) \ar{r} & 0
            \end{tikzcd}
        \end{equation*}
        where $\phi$ and $\pi$ are the natural quotient maps and $\alpha$ is the natural inclusion induced by localization.
        We define $\psi([a],[b])=[af+bg]$, now noting that the top row becomes an exact sequence. Applying the rank-nullity
        theorem to $\psi$, we find that
        \begin{align*}
            \dim\left( k[x,y]/\fr m^r\times k[x,y]/\fr m^s \right) &= \dim\text{im }\psi + \dim\ker\psi\\
            &\geq \dim\text{im }\psi =\dim\ker\phi.
        \end{align*}
        Applying the rank-nullity theorem to $\phi$, we find that
        \begin{align*}
            \dim k[x,y]/\fr m^{r+s}&=\dim\ker\phi+\dim k[x,y]/(\fr m^{r+s},f,g).
        \end{align*}
        Combining these inequalities yields
        \begin{align*}
            (Y\cdot Z)_P &= \dim \mathcal{O}_P/(f,g)\\
            &\geq\dim \mathcal{O}_P/(\fr m^{r+s},f,g)\\
            &=\dim k[x,y]/(\fr m^{r+s},f,g)\\
            &\geq \dim k[x,y]/\fr m^{r+s}-\dim k[x,y]/\fr m^s-\dim k[x,y]/\fr m^r\\
            &=\frac{(m+n)(m+n+1)}{2}-\frac{m(m+1)}{2}-\frac{n(n+1)}{2}\\
            &=mn,
        \end{align*}
        as desired.
\item When one of the curves is a line, the polynomial $g$ is linear, $g = ax - by$. Either $a\neq 0$ or $b\neq 0$; we
	assume WLOG that $a\neq 0$. Then in the quotient $\mathcal{O}_P / (f,g)$ we can solve for $x$: $x = by/a $.
	Substituting this expression for $x$ in $f$ produces a polynomial $f(by/a, y) = h(y)$. The ring we are left with is:
	\[	\left(k[x,y]/(f,g)\right)_{(x,y)} = \left(k[y]/(h)\right)_{(y)}	\]
	Note that, unless $ax-by$ is one of the tangent directions at $P$, the lowest degree term in $h$ will be $y^r$,
	where $r = \mu_P(Y)$. Then we can write:
	\[      h(y) = y^r( c_r + \dots + c_d y^{d-r})       \]
	The factor in parantheses is a unit in $\mathcal{O}_P$, which shows that:
	\[       \left(k[y]/(h)\right)_{(y)} =   \left(k[y]/(y^r)\right)_{(y)}     \]
	Therefore \todo{finish this argument}
\item We use again the fact that
	\[        k[x,y]/(f,g) = \bigoplus_{P \in V(f,g)} \mathcal{O}_P /(f,g)      \]
	This shows $\dim_k k[x,y]/(f,g) = \sum (L \cdot Y)_P = (L \cdot Y)$ Using the same argument as in the 
	previous part, $k[x,y]/(f,g) = k[y]/(h)$, where $h(y) = f(by/a, y)$ is a degree $d$ polynomial in $y$. Then
	$\dim_k k[x,y]/(f,g) = d$, as desired.
\end{enumerate}

\subsection*{Problem I.5.10}
\begin{enumerate}[(a)]
\item For any point $P\in X$, $\dim T_PX=\dim_k\fr m/\fr m^2\geq\dim \mathcal{O}_P$ by Proposition 5.2A.
        Exercise 3.12 shows that $\dim \mathcal{O}_P=\dim X$, and hence $\dim T_PX\geq \dim X$. By 
        Theorem 5.1, $\dim T_PX=\dim_k\fr m/\fr m^2=\dim X$ if and only if $P$ is nonsingular.
\item We can assume $X$ and $Y$ are affine, by replacing them with affine opens that contain $P$ and $\phi(P)$ if 
	needed; the local rings $\mathcal{O}_P$ and $\mathcal{O}_{\phi(P)}$ remain unchanged. Therefore a 
	morphism $\phi : X \to Y$ induces a ring homomorphism:
	\[	\phi^* : A(Y) \to A(X)	\]
	Upon restricting this to the maximal ideal $\fr m_{\phi(P)}$, the image is contained in $\fr m_{P}$, since:
	\[	f \in \fr m_{\phi(P)} \Leftrightarrow f(\phi(P)) = 0 \Leftrightarrow (\phi^* f)(P) = 0 \Leftrightarrow
	\phi^*f \in \fr m_P	\]
	Similarly, the restriction of $\phi^*$ to $\fr m_{\phi(P)}^2$ maps to $\fr m_{P}^2$:
	\begin{align*}
	f \in \fr m_{\phi(P)}^2 &\Leftrightarrow f = gh, \text{ where } g,h\in \fr m_{\phi(P)} \\
	&\Leftrightarrow \phi^* f = (\phi^* g) (\phi^* h),  \text{ where } \phi^* g, \phi^* h \in \fr m_P \\
	&\Leftrightarrow \phi^* f \in \fr m_P^2
	\end{align*}
	Then there is a well-defined map on the quotients:
	\begin{align*}
	\psi : \fr m_{\phi(P)}/ \fr m_{\phi(P)}^2 &\to \fr m_{P}/ \fr m_{P}^2 \\
	f \fr m_{\phi(P)}^2 &\mapsto (\phi^* f) \fr m_{P}^2
	\end{align*}
	$\psi$ is actually a linear map of vector spaces. This property is inherited from the homomorphism $\phi$, which
	satisfies $\phi(a f + bg) = a \phi(f) + b \phi(g)$, for $f,g \in A(Y)$ and $a,b \in k$. Now we can simply define
	$T_P(\phi)$ to be the dual map to $\psi$:
	\[	T_P(\phi) : (\fr m_{P}/ \fr m_{P}^2)^* = T_P (X) \to (\fr m_{\phi(P)}/ \fr m_{\phi(P)}^2)^* = 
	T_{\phi(P)}( Y)	\]
\item In this case the morphism is $\phi (x,y) = (x,0)$. The coordinate rings are:
	\[	A(X) = k[x,y] / (x-y^2) = k[y] \Rightarrow \fr m_{(0,0)} / \fr m_{(0,0)}^2 = k \cdot y	\]
	\[	A(Y) = k[x,y] / (y) = k[x] \Rightarrow \fr m_{\phi(0,0)} / \fr m_{\phi(0,0)}^2 = k \cdot x	\]
	The map $\psi$ defined in the previous part gives:
	\[	\psi(x) = (x\circ \phi) \text{ mod } (y^2) = x \text{ mod } (y^2) = 0	\]
	The second equality happens because $\phi$ leaves the $x$ coordinate unchanged. The last equality follows
	from $x - y^2 = 0$ in $A(X)$. Since $x$ generates $\fr m_{\phi(0,0)} / \fr m_{\phi(0,0)}^2$, $\psi = 0$ identically.
	The dual map of the zero map is itself the zero map, so $T_{(0,0)} (\phi) = 0$.
\end{enumerate}


\subsection*{Problem I.6.1}
\begin{enumerate}[(a)]
\item Let $K = K(Y)$. Using proposition 6.7, $Y$ is isomorphic to an abstract nonsingular curve, i.e. an open subset $U$ of
	$C_K$. We want to show that $U$ is a proper subset of $C_K$. Theorem 6.9 shows that $C_K$ is isomorphic to a 
	nonsingular projective curve with function field $K$. By corollary 6.12, this curve is unique up to isomorphism, so
	$C_K \cong \Proj^1$. But $Y \not \cong \Proj^1$, so $U$ must be a proper subset of $C_K$. Let $P \in C_K - U$, then $C_K - \{P\}
	\cong \A^1$, using the identification of $C_K$ with $\Proj^1$. Hence we find that
	\[	Y \cong U \subset C_K - \{P\} \cong \A^1.	\]
\item 
	
\end{enumerate}


\subsection*{Problem I.6.2}
\begin{enumerate}[(a)]
\item Let $f(x,y) = y^2 - x^3 + x$; the ideal of $Y$ is $(f)$. We show below that the rank of $Df$ is 1 at every point
	of $Y$:
	\[	Df = ( \begin{array} {cc} -3x^2 + 1 & 2y \end{array} )	\]
	\[	Df = 0 \Leftrightarrow \left\{ \begin{array}{c} 3x^2 = 1 \\ y = 0 \end{array}\right.	\]
	This has solutions $(1/\sqrt{3} , 0)$ and $(-1/\sqrt{3}, 0)$, neither of which belongs to $Y$. Therefore $Y$ is
	nonsingular. By theorem 5.1, the local rings $A_{\fr m_P}$ are regular for each $P \in Y$. Since $A$ has
	dimension 1, so do its localizations at maximal ideals $A_{\fr m_P}$. Then we can apply theorem 6.2, which shows
	that $A_{\fr m_P}$ is integrally closed for all $P\in Y$. But $\fr m_P$ are all the maximal ideals of $A$, because
	maximal ideals are in bijective correspondence with points of $Y$. We have shown, then, that the localizations of $A$
	at all maximal ideals are integrally closed, and therefore $A$ is integrally closed.
\item There is no relation in $A$ between powers of $x$, so $k[x]$ is a free algebra over $k$ with one generator, i.e. a
	polynomial ring. \todo{Is there more to say about this?} Now consider the element $y \in K$; it is integral over $k[x]$
	because it satisfies the monic polynomial equation $y^2 - x^3 + x = 0$. $k[x]$ and $y$ generate all of $A$, so $A$ is
	contained in the integral closure of $k[x]$. However, $A$ is integrally closed in its field of fractions $K$, so the integral
	closure of $k[x] \subset A$ must be contained in $A$. Putting these two results together shows that the integral closure
	is exactly $A$.
\item We define $\sigma_0$ on the generators $x, y$ of $k[x,y]$:
	\begin{align*}	\sigma_0 (x) &= x \\ \sigma_0(y) &=-y	\end{align*}
	And thus homomorphism properties determine $\sigma_0$ uniquely on all of $k[x,y]$. To show that $\sigma_0$ descends
	to an automorphism $\sigma$ of the quotient $A = k[x,y] / (f)$, we check that it maps the ideal $(f)$ to itself:
	\begin{align*}	
	\sigma_0(f) &= \sigma_0(y)^2 - \sigma_0(x)^3 + \sigma_0(x) \\
	&= (-y)^2 - x^3 + x \\
	&= f 
	\end{align*}
	We define the norm of $a\in A$ by $N(a) = a \cdot \sigma(a)$. We have $N(x) = x \cdot x = x^2 \in k[x]$, and $N(y) =
	y \cdot (-y) = -x^3 + x \in k[x]$. Every $a \in A$ can be written as $f(x) + y g(x)$; then we compute its norm by:
	\begin{align*}
	N(a) &= a \cdot \sigma(a) \\
	&= \big(f(x) + y g(x)\big)\big(f(x) - y g(x)\big) \\
	&= f^2(x) + y^2 g^2(x) \\
	&= f^2(x) + (x^3 - x) g^2(x)
	\end{align*}
	Which shows that $N(a) \in k[x]$. If $a = 1$, then $f(x) = 1, g(x) = 0$, which gives $N(1) = 1$. Finally, we show that 
	the norm is multiplicative:
	\begin{align*}
	N(ab) &= a b \cdot \sigma (ab) \\
	&= \big(a\sigma(a)\big)\big(b\sigma(b)\big) \\
	&= N(a) N(b)
	\end{align*}
\item We search for units, i.e. elements $a,b$ such that $ab = 1$. Using the multiplicative property of the norm:
	\[	1= N(1) = N(ab) = N(a) N(b)	\]
	$N(a)$ and $N(b)$ are therefore units in $k[x]$, which shows $N(a), N(b) \in k$. This can only happen if $a,b \in k$, so
	the only units in $A$ are the elements of $k$. Next, we claim that there is no $a \in A$ such that $N(a)$ is a linear 
	polynomial in $x$. To see this, we use the result from the previous part:
	\[	N(a) = f^2(x) + (x^3 - x) g^2(x)	\] 
	And it's clear that this is not linear in $x$ for any polynomials $f,g$. Using this fact, we can show that $x$ and $y$ are
	irreducible. Consider $a,b \in A$ such that $ab = x$. Then $N(a) N(b) = N(x) = x^2$. $k[x]$ is a UFD, so either $N(a) 
	= N(b) = x$, or one of $a,b$ is a unit. The first case is ruled out since $x$ is linear, therefore $x$ is irreducible. Similarly,
	let $a,b \in A$ such that $ab = y$. Then $N(a) N(b) = N(y) = - x^3 + x = x(1-x)(1+x)$. Unless one of $a,b$ is a unit, either
	$N(a)$ or $N(b)$ is linear in $x$, which is impossible. Therefore $y$ is irreducible. This shows how we can factor $y^2 
	\in A$ into irreducibles in two distinct ways: $y^2 = y \cdot y = x(x-1)(x+1)$. Hence $A$ is not a UFD.
\item $Y$ is an affine variety, so the result of problem 3.1(e) shows that $Y$ is not isomorphic to $\Proj^1$. Recall also that in
	part (a) of this problem we proved that $Y$ is nonsingular. Then problem 6.1(c) shows that $Y$ rational would imply that
	$A = A(Y)$ is a UFD. We showed in part (d) of this problem that this is not the case, so $Y$ is not rational.
\end{enumerate}

\subsection*{Problem I.7.1}

\subsection*{Problem I.7.4}

\subsection*{Problem I.7.6}

\newpage
\section*{CHAPTER II: Schemes}


\subsection*{Problem II.1.1}
It suffices to show that the sheaf associated to the constant presheaf $\mathcal{C}$ and the constant sheaf $\mathcal{A}$
are isomorphic as sheaves. Note that $\mathcal{C}$ has stalks at every point equal to $A$ and so $\mathcal{C}^+$ is the sheaf
whose sections $\Gamma(U,\mathcal{C}^+)$ are functions $s:U\to A$ satisfying property (2) of Proposition-Definition 1.2:
for each $P\in U$, there is a neighborhood $V$ of $P$, contained in $U$, and an element $t\in\mathcal{C}(V)$ such that for
all $Q\in V$, the germ $t_Q$ of $t$ at $Q$ is equal to $s(Q)$. In the case of the constant presheaf, $\mathcal{C}(V)=A$ and
$t_Q=t$.

Fix a function $f\in\Gamma(U,\mathcal{A})$. We wish to send it to a function in $\Gamma(U,\mathcal{C}^+)$. But $f$ satisfies
property (2): for any $P\in U$, we can find a neighborhood $V\ni P$ such that $f$ is constant on $V$ and hence choose
$t\in\mathcal{C}(V)$ to be $f(P)$. Thus we define a morphism of sheaves $\phi:\mathcal{A}\to\mathcal{C}^+$ that takes every
function to itself. But clearly $\phi$ has an inverse that takes any $s\in\Gamma(U,\mathcal{C}^+)$ to itself in
$\Gamma(U,\mathcal{A})$ -- $s$ is continuous because property (2) forces $s$ to be locally constant map into a discrete
space. As $\phi$ clearly commutes with restriction maps, it is an isomorphism of sheaves.


\subsection*{Problem II.1.2}
\begin{enumerate}[(a)]
    \item We first show that for a morphism $\phi:\mathcal{F}\to\mathcal{G}$, $(\ker\phi)_P=\ker\phi_P$.
        Given a germ $(U,f)\in(\ker\phi)_P$, the induced map on stalks takes $(U,f)\mapsto (U,\phi(U)(f))=(U,0)$
        and hence $(\ker\phi)_P\subset\ker\phi_P$. Next consider $(U,f)\in\ker\phi_P$, i.e. $\phi_P(U,f)\sim0$.
        Then there must exist some $V\subset U$ such that $\phi(U)(f)|_V=0$, which implies that $\phi(V)(f|_V)=0$.
        Then $f|_V\in(\ker\phi)(V)$ and so the $(V,f|_V)\in(\ker\phi)_P$. But clearly $(V,f|_V)\sim(U,f)$, so
        $(U,f)\in(\ker\phi)_P$ and $\ker\phi_P\subset(\ker\phi)_P$.
        
        Next we show that $(\im\phi)_P=\im\phi_P$, where $\im\phi$ is the sheaf associated to the image presheaf
        $\phi(\mathcal{F})$. As $\phi(\mathcal{F})_P\cong(\im\phi)_P$, any germ in $(\im\phi)_P$ can be written
        as $(U,g)$ such that there exists an $f\in\mathcal{F}(U)$ satsifying $\phi(U)(f)=g$. Consider the germ
        $(U,f)\in\mathcal{F}_P$. It is sent by $\phi_P$ to $(U,\phi(U)(f))=(U,g)$, and hence is contained in $\im\phi_P$.
        Next consider a germ $(U,g)\in\im\phi_P$. By construction, there exists a germ $(U,f)$ such that $\phi_P(U,f)=(U,g)$,
        for $f\in\mathcal{F}(U)$. As $\phi_P(U,f)=(U,\phi(U)(f))$, we find that $\phi(U)(f)=g$ and hence $(U,f)\in(\im\phi)_P$
        and $\im\phi_P\subset(\im \phi)_P$.
    \item From above, $(\ker\phi)_P=\ker\phi_P$ and so if $\phi$ is injective ($\ker\phi=0$) then $\phi_P$ must be injective
        as well. Conversely, if $\phi_P$ is injective, we find that $(\ker\phi)_P=0$ for all $P$. But this means that
        given any section $s\in\ker\phi(U)$ in an open $U$, there exist neighborhoods of any point $P$ in $U$ on which
        $s$ is identically zero. As these neighborhoods cover $U$, the first sheaf axiom forces $s=0$. Hence $\ker\phi(U)=0$
        for every neighborhood $U$, and thus $\phi$ is injective.

        Again from above, $(\im\phi)_P=\im\phi_P$ and so if $\phi$ is surjective then $\im\phi_P=\mathcal{G}_p$ 
        so $\phi_P$ is surjective. Conversely, if $\phi_P$ is surjective then $(\im\phi)_P=\mathcal{G}_P$, which
        by Proposition 1.1 implies that $\im\phi=\mathcal{G}$. Hence $\phi$ is surjective.
    \item Consider the following sequence of sheaves and morphisms:
        \begin{equation*}
            \begin{tikzcd}
                \cdots\ar{r} & \mathcal{F}^{i-1}\ar{r}{\phi^{i-1}} & \mathcal{F}^i\ar{r}{\phi^i} & \mathcal{F}^{i+1}\ar{r} & \cdots
            \end{tikzcd}
        \end{equation*}
        We wish to show that this sequence is exact if and only if for each $P\in X$ the corresponding sequence of stalks,
        \begin{equation*}
            \begin{tikzcd}
                \cdots\ar{r} & \mathcal{F}^{i-1}_P\ar{r}{\phi^{i-1}_P} & \mathcal{F}_P^i\ar{r}{\phi^i_P} & \mathcal{F}^{i+1}_P\ar{r} & \cdots,
            \end{tikzcd}
        \end{equation*}
        is exact. The sequence of sheaves is exact if and only if, in the following diagram, the diagonals are exact:
        \begin{equation*}
            \begin{tikzcd}
                \;&&0\ar{rd}&&0&&0\ar{rd}&&0\\
                \;&&&\mathcal{L}^i\ar{rd}\ar{ru}&&&&\mathcal{L}^{i+2}\ar{ru}\ar{rd}\\
                \cdots\ar{rd}\ar{rr} && \mathcal{F}^{i-1}\ar{rr}{\phi^{i-1}}\ar{ru} && \mathcal{F}^i\ar{rr}{\phi^i}\ar{rd} && \mathcal{F}^{i+1}\ar{rr}\ar{ru} && \cdots\\
                \;&\mathcal{L}^{i-1}\ar{ru}\ar{rd}&&&&\mathcal{L}^{i+1}\ar{ru}\ar{rd}\\
                0\ar{ru}&&0&&0\ar{ru}&&0
            \end{tikzcd}
        \end{equation*}
        where $\mathcal{L}^i=\im\phi^{i-1}=\ker\phi^i$. Passing to the stalks, we find that the sequences
        \begin{equation*}
            \begin{tikzcd}
                0\ar{r} & \mathcal{L}^{i}_P\ar{r}{\alpha_P} & \mathcal{F}_P^i\ar{r}{\beta_P} & \mathcal{L}^{i+1}_P\ar{r} & 0
            \end{tikzcd}
        \end{equation*}
        are exact at $\mathcal{L}^i_P$ and $\mathcal{L}^{i+1}_P$ by (b). Exactness at $\mathcal{F}_P^i$ follows similarly:
        $\ker\beta=\im\alpha$ implies that $(\ker\beta)_P=(\im\alpha)_P$, which reduces via (a) to $\ker\beta_P=\im\alpha_P$.
        Redrawing the last diagram with stalks instead of sheaves thus yields a diagram that is exact along the diagonals,
        which happens if and only if the original, horizontal, sequence of stalks is exact.
\end{enumerate}

\subsection*{Problem II.1.3}
\begin{enumerate}[(a)]
    \item The morphism of sheaves $\phi$ is surjective if and only if the induced map on stalks $\phi_P$ is surjective for every $P$.
        Suppose the given condition holds. Fix a germ $(U,g)\in\mathcal{G}_P$. The section $g\in\mathcal{G}(U)$ restricts
        to $g|_{U_i}$ subordinate to the given open cover $\{U_i\}$. Take any $U_j$ containing $P$; we can find an $f\in\mathcal{F}(U_j)$
        such that $\phi(f)=g|_{U_j}$. Hence $\phi_P(U_j,f)=(U_j,g|_{U_j})\sim(U,g)$. We conclude that $\phi_P$ is surjective.
        Conversely, suppose $\phi_P$ is surjective for every $P$ and fix a section $s\in\mathcal{G}(U)$. Consider the germs
        of $s$ at every point $P$ in $U$ written as $(U_i,s|_{U_i})$ for some $U_i$. Surjectivity on stalks yields germs
        $(U_i,t_i)$ in each $\mathcal{F}_P$ satisfying the required condition.
    \item Let $X=\C$ as a complex manifold. Consider the exponential sequence,
        \begin{equation*}
            \begin{tikzcd}
                0\ar{r} & \Z_\C\ar{r} & \mathcal{O}_\C\ar{r}{\exp} & \mathcal{O}_\C^\times\ar{r} & 0,
            \end{tikzcd}
        \end{equation*}
        where $\Z_\C$ is the constant sheaf, $\mathcal{O}_\C$ is the sheaf of holomorphic functions, $\mathcal{O}_\C^\times$
        is the sheaf of non-vanishing holomorphic functions, and the exponential is given over any open by $f\mapsto \exp(2\pi i f)$.
        The map induced by the exponential is surjective on stalks, as one can always locally take a logarithm.
        Globally, however, if one chooses $U=\C$, the map on sections $\mathcal{O}_\C(\C)\to\mathcal{O}_\C^\times(\C)$ is not surjective,
        as there is no global logarithm.
\end{enumerate}

\subsection*{Problem II.1.4}
\begin{enumerate}[(a)]
    \item Let $\phi:\mathcal{F}\to\mathcal{G}$ be a morphism of presheaves that is injective at every open.
        Then the morphism $\phi_P$ on stalks is clearly injective for each $P$, and as $\mathcal{F}^+$ and $\mathcal{G}^+$
        have the same stalks as $\mathcal{F}$ and $\mathcal{G}$ respectively, the induced map on sheafifications
        must be injective by Proposition 1.1.
    \item Now consider a morphism of sheaves $\psi:\mathcal{F}\to\mathcal{G}$. On the level of presheaves, the natural
        map $\im\psi\to\mathcal{G}$ is clearly injective for every $U$. By (a), the induced map at the level
        of sheaves is injective, and hence $\im\psi$ can be thought of as a subsheaf of $\mathcal{G}$.
\end{enumerate}

\subsection*{Problem II.1.5}
If $\phi:\mathcal{F}\to\mathcal{G}$ is a sheaf isomorphism, it is clear that it must be both injective and surjective.
Conversely, let $\phi$ be injective and surjective. The induced map on stalks $\phi_P$ is then also injective and surjective,
by problem II.1.2 and hence an isomorphism at every point. By Propositon 1.1, $\phi$ is an isomorphism.

\subsection*{Problem II.1.6}
\begin{enumerate}[(a)]
    \item Let $\mathcal{F}'$ be a subsheaf of $\mathcal{F}$. Consider the natural map $\mathcal{F}\to\mathcal{F}/\mathcal{F}'$.
        Recall that $(\mathcal{F}/\mathcal{F}')_P=\mathcal{F}_P/\mathcal{F}'_P$, and hence the induced map on stalks
        $\mathcal{F}_P\to\mathcal{F}_P/\mathcal{F}'_P$ is surjective with kernel $\mathcal{F}'_P$ (because
        $\mathcal{F}'_P\hookrightarrow\mathcal{F}_P$), which by problem II.1.2 implies that the map of sheaves is surjective.
        Thus there is an exact sequence
        \begin{equation*}
            \begin{tikzcd}
                0\ar{r} & \mathcal{F}'\ar{r} & \mathcal{F}\ar{r} & \mathcal{F}/\mathcal{F}'\ar{r} & 0.
            \end{tikzcd}
        \end{equation*}
    \item Conversely, suppose the sequence
        \begin{equation*}
            \begin{tikzcd}
                0\ar{r} & \mathcal{F}'\ar{r} & \mathcal{F}\ar{r} & \mathcal{F}''\ar{r} & 0.
            \end{tikzcd}
        \end{equation*}
        is exact. By problem II.1.2, we obtain a similar sequence on stalks. Note that the map
        $\mathcal{F}'\to\im\left(\mathcal{F}'\to\mathcal{F}\right)$ is a surjection on stalks and thus surjective.
        The exact sequence also gives us injectivity so the map is an isomorphism. This implies
        that $\mathcal{F}'$ is isomorphic to a subsheaf of $\mathcal{F}$.
        Similarly, the induced map $\mathcal{F}_P\to\mathcal{F}''_P$ is surjective with kernel $\mathcal{F}'_P$,
        and so $\mathcal{F}''_P\cong \mathcal{F}_P/\mathcal{F}'_P$.
\end{enumerate}

\subsection*{Problem II.1.7}
Let $\phi:\mathcal{F}\to\mathcal{G}$ be a morphism of sheaves.
\begin{enumerate}[(a)]
    \item It is easy to see that we obtain, at the level of stalks, an exact sequence
        \begin{equation*}
            \begin{tikzcd}
                0\ar{r} & (\ker\phi)_P\ar{r} & \mathcal{F}_P\ar{r} & (\im\phi)_P\ar{r} & 0,
            \end{tikzcd}
        \end{equation*}
        and so $(\im\phi)_P\cong\mathcal{F}_P/(\ker\phi)_P\cong(\mathcal{F}/(\ker\phi))_P$. Applying Proposition 1.1 yields
        the desired result.
    \item Precisely the same argument as above in (a), except with the following exact sequence:
        \begin{equation*}
            \begin{tikzcd}
                0\ar{r} & (\im\phi)_P\ar{r} & \mathcal{G}_P\ar{r} & (\coker\phi)_P\ar{r} & 0.
            \end{tikzcd}
        \end{equation*}
\end{enumerate}


\subsection*{Problem II.1.8}
Consider the image of the exact sequence of sheaves
\begin{equation*}
    \begin{tikzcd}
        0\ar{r} & \mathcal{F}'\ar{r}{\alpha} & \mathcal{F}\ar{r}{\beta} & \mathcal{F}'',
    \end{tikzcd}
\end{equation*}
under the image of the functor $\Gamma(U,\cdot)$, for an open $U$,
\begin{equation*}
    \begin{tikzcd}
        0\ar{r} & \Gamma(U,\mathcal{F}')\ar{r}{\alpha(U)} & \Gamma(U,\mathcal{F})\ar{r}{\beta(U)} & \Gamma(U,\mathcal{F}'').
    \end{tikzcd}
\end{equation*}
This sequence is exact at $\Gamma(U,\mathcal{F}')$, because exactness at $\mathcal{F}'$ implies that $(\ker\alpha)(U)\equiv\ker\alpha(U)=0$.
Exactness at $\mathcal{F}$ implies that $\ker\beta=\im\alpha$ 
We claim that the image presheaf $\im\alpha$ is in this case a sheaf, and hence $(\ker\beta)(U)=(\im\alpha)(U)$,
which becomes $\ker\beta(U)=\im\alpha(U)$.  \todo{simplify this proof via above problems}
To see this, note first that the image presheaf satisfies the first sheaf axiom by virtue of $\mathcal{F}$ being a sheaf.
The second sheaf axiom is satisfied as follows: let $\{U_i\}$ be an open cover of $U$ and $t_i\in\Gamma(U_i,\mathcal{\im\alpha})$,
such that $t_i,t_j$ agree on their overlaps $V_{ij}=U_i\cap U_j$. Then we find
\begin{align*}
    t_i|_{V_{ij}} &= t_j|_{V_{ij}}\\
    \alpha(s_i)|_{V_{ij}} &= \alpha(s_j)_{V_{ij}}\\
    \alpha(s_i|{V_{ij}}) &= \alpha(s_j|_{V_{ij}}),
\end{align*}
which by injectivity of $\alpha(U)$ yields $s_i|_{V_{ij}}=s_j|_{V_{ij}}$. The sheaf property of $\mathcal{F}'$
gives us an $s\in\Gamma(U,\mathcal{F}')$ that restricts to the $s_i$ appropriately. Using the commutativity
of restriction maps with $\alpha$, we find that $\alpha(s)\in\Gamma(U,\mathcal{F}')$ restricts to the $t_i$,
as desired.

\subsection*{Problem II.1.13}
Let $\mathcal{F}$ be a presheaf over $X$. Recall that the associated sheaf, $\mathcal{F}^+$, has sections over an open $U$
functions $f:U\to\cup_{P\in U}\mathcal{F}_P$ satisfying the following properties:
\begin{enumerate}
    \item $f(P)\in\mathcal{F}_P$;
    \item for each $P\in U$ there exists a neighborhood $V$ of $P$ contained in $U$ and an element
        $t\in\mathcal{F}(V)$ such that for all $Q\in V$, the germ $t_Q$ of $t$ at $Q$ is equal to $f(Q)$.
\end{enumerate}
The first condition shows that $f$ is a section of the projection $\pi:\text{Sp\'e}(\mathcal{F})\to U$. The topology
of the espace \'etal\'e is such that any basic open is the set of germs $\{s_P\}\subset\text{Sp\'e}(\mathcal{F})$ of some $s\in\mathcal{F}(U)$
and for all $P$. The second condition shows that the image of $f$ is, at least locally, precisely such an open.
The preimage by $f$ of any open in Sp\'e$(\mathcal{F})$ is then a union of open neighborhoods $V$ as described by condition 2,
and hence $f$ is in fact a continuous section of $\pi$. In fact, for this reason, any continuous section of $\pi$ 
over $U$ yields a section of $\mathcal{F}^+(U)$.


\subsection*{Problem II.1.14}
It suffices to show that the complement of the support of $s\in\mathcal{F}(U)$ is open, i.e. the
subset of $U$ given by $\{P\in U \mid s_P=0\}$. This subset, $U\setminus\text{supp }s$, is open if for every point $P$ contained in it,
there exists an open neighbhorhood of $P$ contained in $U\setminus\text{supp }s$. This is clearly satisfied as there must exist an
open $V\subset U$ containing $P$ such that $s|_V=0$ (the germ $s_P$ vanishes at $P$), for all $P$.\todo{find a sheaf with non-closed support}

\subsection*{Problem II.1.15}
\todo{Think about gluability}

\subsection*{Problem II.1.16}
\begin{enumerate}[(a)]
    \item Let $X$ be an irreducible space, i.e. it cannot be written as the union of two closed, proper subsets.
        Furthermore, any open $U\subset X$ is irreducible and in particular, connected (c.f. problem I.1.6).
        Now consider the constant sheaf $\mathcal{A}$ over $X$. The connectedness of every open implies that the sections
        above any open are simply constant functions $U\to A$. Then for any open subset $V\subset U$,
        the sections above $V$ are constant functions $V\to A$. There is an obvious surjection
        $\mathcal{A}(U)\twoheadrightarrow\mathcal{A}(V)$ and hence the constant sheaf is flasque over any
        irreducible space.
    \item Let
        \begin{equation*}
            \begin{tikzcd}
                0\ar{r} & \mathcal{F}'\ar{r}{\alpha} & \mathcal{F}\ar{r}{\beta} & \mathcal{F}''\ar{r} & 0
            \end{tikzcd}
        \end{equation*}
        be an exact sequence of sheaves and let $\mathcal{F}'$ be flasque. Fix any open set $U$.
        We wish to show that the sequence of abelian groups,
        \begin{equation*}
            \begin{tikzcd}
                0\ar{r} & \mathcal{F}'(U)\ar{r}{\alpha(U)} & \mathcal{F}(U)\ar{r}{\beta(U)} & \mathcal{F}''(U)\ar{r} & 0
            \end{tikzcd}
        \end{equation*}
        is also exact. Exactness at $\mathcal{F}'(U)$ and $\mathcal{F}(U)$ follow from problem II.1.8, so it suffices
        to show surjectivity of $\beta(U)$.
        
        Fix a $t\in\mathcal{F}''(U)$. Surjectivity of $\beta$ implies surjectivity of $\beta_P$ on stalks, so
        we can find at least one germ $s_P\in\mathcal{F}_P$ mapping to any $t_P\in\mathcal{F}''_P$. The set of all such germs
        can be given a partial order on inclusions and hence, by Zorn's lemma, contains a germ with maximal domain,
        call it $(V,s)$. If $V=U$ we are done. Suppose instead that $V\subsetneq U$. Then we can find an open $V'\subset U$
        not contained in $V$ together with (via the same argument) a section $r\in\mathcal{F}(V')$ such that $\beta(V')(r)=t|_{V'}$.
        It is not hard to see that $\beta(V\cap V')(s|_{V\cap V'}-r|_{V\cap V'})=0$. Now, exactness at $\mathcal{F}(V\cap V')$
        in the sequence
        \begin{equation*}
            \begin{tikzcd}
                0\ar{r} & \mathcal{F}'(V\cap V')\ar{r}{\alpha(V\cap V')} & \mathcal{F}(V\cap V')\ar{r}{\beta(V\cap V')} & \mathcal{F}''(V\cap V')
            \end{tikzcd}
        \end{equation*}
        implies that there exists a $q\in\mathcal{F}'(V\cap V')$ mapped to $s|_{V\cap V'}-r|_{V\cap V'}$. As
        $\mathcal{F'}$ is flasque, $q$ extends to a section $q'\in\mathcal{F}'(U)$. If we now define $r'=r-\alpha(V')(q'|_{V'})$,
        it is clear that $s$ and $r'$ agree on $V\cap V'$, which upon gluing yield a section $s'\in\mathcal{F}(V\cup V')$
        such that $\beta(V\cup V')(s')=t|_{V\cup V'}$, contradicting the maximality of $V$. Thus $V=U$ and $\beta(U)$ must
        be surjective.
    \item Fix $V\subset U$ both open and some $s\in\mathcal{F}''(V)$. By (b), the sequence is exact on $V$ and hence 
        there exists a $t\in\mathcal{F}(V)$ such that the quotient map $q$ sends $q(t)=s$. As $\mathcal{F}$ is flasque,
        $t$ extends to a section $t'\in\mathcal{F}(U)$, and $q(t')\in\mathcal{F}''(U)$ yields an extension of $s$ to $U$.
        Thus $\mathcal{F}''$ is flasque.
    \item Take $s\in(f_*\mathcal{F})(V)$ for some $V\subset U$ both open. By construction, $(f_*\mathcal{F})(V)=\mathcal{F}(f^{-1}V)$
        and $f^{-1}V\subset f^{-1}U$, so by flasqueness of $\mathcal{F}$, we find an extension of $s$ to $\mathcal{F}(f^{-1}U)=(f_*\mathcal{F})(U)$.
        Hence the pushforward is flasque.
    \item That $\mathcal{G}$ is flasque is obvious -- any section can trivially be extended. Furthermore, there is a natural
        morphism $\mathcal{F}\to\mathcal{G}$ given (over any open) by simply taking the germ of the provided section at every point.
        This map is in fact injective: if we have two such collections of germs $s_P=t_P$, the second sheaf condition requires that the
        two associated sections be equal.
\end{enumerate}

\subsection*{Problem II.1.17}
Consider the skyscraper sheaf $i_P(A)$ on a topological space $X$. Let us compute the stalks. Take any $Q\in X$ inside the
closure $\{P\}^-$ of the set containing $P$. Any open $V\ni Q$ must contain $P$: if not, the complement of $V$ in $\{P\}^-$ would
be a closed set in $\{P\}^-$ containing $P$, contradicting that $\{P\}^-$ is the closure of the set containing $P$. It is
clear by the construction of $i_P(A)$ that in this case $(i_P(A))_Q=A$. Suppose, on the other hand, that $Q$ lies outside
of $\{P\}^-$. Then we can find an open set $V\ni Q$ not containing $P$, and thus $(i_P(A))_Q=0$.
Let $i:\{P\}^-\to X$ be the natural inclusion. Then the pushforward by $i$ of the constant sheaf $\mathcal{A}$ on $\{P\}^-$
is precisely the skyscraper sheaf, as only opens $U$ that contain $P$ will have a non-trivial preimage $i^{-1}U$.

\subsection*{Problem II.1.19}
Let $X$ be a topological space, let $Z$ be a closed subset, let $i:Z\to X$ be the inclusion, let $U=X-Z$ be the complementary
open subset, and let $j:U\to X$ be its inclusion.
\begin{enumerate}[(a)]
    \item Let $\mathcal{F}$ be a sheaf on $Z$ and consider the direct image $i_*\mathcal{F}$. Let $P\in X$ be a point in $Z$.
        Then there is an isomorphism $(i_*\mathcal{F})_P\cong\mathcal{F}_P$ constructed as follows. For any germ $(V,f)\in(i_*\mathcal{F})_P$,
        we see that $f\in (i_*\mathcal{F})(V)=\mathcal{F}(i^{-1}V)$. In the case of $P\in Z$, however, $i^{-1}V$ is simply $V\cap Z$,
        which is open in $Z$ (via the subspace topology). Thus $f\in\mathcal{F}(V\cap Z)$, and we define a map on stalks $(i_*\mathcal{F})_P\to\mathcal{F}_P$
        taking $(V,f)\mapsto (V\cap Z,f)$. This map is clearly an isomorphism.
        
        On the other hand, if $P$ is outside of $Z$ then any germ at $P$ can be restricted to an open $V$ disjoint from $Z$, whence
        $i^{-1}V=\varnothing$ and $(i_*\mathcal{F})_P=0$.
    \item Define a presheaf $j(\mathcal{F})$ given by $V\mapsto\mathcal{F}(V)$ if $V\subset U$ and $V\mapsto 0$ otherwise. Denote
        by $j_!(\mathcal{F})$ the sheaf associated to $j(\mathcal{F})$. Let $P\in X$ be a point in $U$. Any germ $(V,f)$ in
        $(j_!(\mathcal{F}))_P=(j(\mathcal{F}))_P$ can be restricted to an open $W\subset V$ with $W\subset U$. This yields
        a map $(j_!(\mathcal{F}))_P\to\mathcal{F}_P$, which is clearly an isomorphism.

        On the other hand, if $P$ is outside of $U$ then for any germ at $P$, written as $(V,f)$, $V\not\subset U$ and so $(V,f)=0$,
        whence $j(\mathcal{F})_P=j_!(\mathcal{F})_P=0$.

        We claim that $j_!(\mathcal{F})$ is the only sheaf restricting to $\mathcal{F}$ on $U$ that enjoys these properties.\todo{prove this}
    \item Let $\mathcal{F}$ be a sheaf on $X$ and $P$ some point in $X$.
        
        Consider the sequence of stalks
        \begin{equation*}
            \begin{tikzcd}
                0\ar{r} & (j_!(\mathcal{F}))_P\ar{r} & \mathcal{F}_P\ar{r} & (i_*\mathcal{F})_P\ar{r} & 0,
            \end{tikzcd}
        \end{equation*}
        for some $P\in X$.\todo{finish}

        This shows that the sequence
        \begin{equation*}
            \begin{tikzcd}
                0\ar{r} & j_!(\mathcal{F})\ar{r} & \mathcal{F}\ar{r} & i_*\mathcal{F}\ar{r} & 0
            \end{tikzcd}
        \end{equation*}
        of sheaves is exact.
\end{enumerate}


\subsection*{Problem II.2.1}
As sets both $D(f)$ and $\Spec A_f$ are precisely those primes of $A$ that do not contain $f$,
and hence the two topological spaces are homeomorphic via a map, call it $\phi:D(f)\to\Spec A_f$. It remains to show
that the sheaves $\mathcal{O}_X|_{D(f)}$ and $\mathcal{O}_{A_f}$ are isomorphic, i.e. the map
$\phi^\#:\mathcal{O}_{\Spec A_f}\to\phi_*(\mathcal{O}_X|_{D(f)})$ is an isomorphism. But this is clear:
sections over $U\subset\Spec A_f$ are functions $s:U\to\coprod_{\fr p\in U}(A_f)_{\fr p}$ such that $s(\fr p)\in (A_f)_{\fr p}$
that can locally be written as quotients, while sections over $\phi^{-1}U$ are functons $t:\phi^{-1}U\to\coprod_{\fr q\in\phi^{-1}U}A_{\fr q}$
satisfying the same. These rings are isomorphic, as the primes in the latter disjoint union run over all primes avoiding $f$,
precisely those primes that index the former disjoint union.

\subsection*{Problem II.2.2}
Let $(X,\mathcal{O}_X)$ be a scheme and $U\subset X$ be an open subset. The pair $(U,\mathcal{O}_X|_U)$ is a
locally ringed space as the stalks of the restricted sheaf in $U$ are isomorphic to the stalks of $\mathcal{O}_X$
in $U$. Moreover, $X$ has an open cover $X=\cup_i V_i$ such that $(V_i,\mathcal{O}_X|_{V_i})$ is
isomorphic to an affine scheme $\Spec A_i$. Consider the open cover $U=\cup_i U\cap V_i$. Each $U\cap V_i$ is an open subset
of $V_i$ and hence by Problem II.2.1 isomorphic to the spectrum of a localization of $A_i$. Hence this
open cover is a covering of $U$ by affine schemes and $(U,\mathcal{O}_X|_U)$ is a scheme, an open subscheme of $(X,\mathcal{O}_X)$,
equipped with the induced scheme structure.

\subsection*{Problem II.2.3}
\begin{enumerate}[(a)]
    \item Suppose $(X,\mathcal{O}_X)$ is reduced. Clearly, then, for every $P\in X$, the local ring $\mathcal{O}_{X,P}$
        has no nilpotents via the description of its elements as germs of $\mathcal{O}_X$ about $P$.
        The converse follows similarly: a nilpotent section of $\mathcal{O}_X(U)$ would pass to a nilpotent
        element in the local ring at any point $P\in U$.
    \item Consider the ringed space $(X,(\mathcal{O}_X)_{\rm red})$. We have a short exact sequence of sheaves
        \begin{equation*}
            \begin{tikzcd}
                0\ar{r} & \mathcal{R}_X\ar{r} & \mathcal{O}_X\ar{r} & (\mathcal{O}_X)_{\rm red}\ar{r} & 0
            \end{tikzcd}
        \end{equation*}
        and thus a short exact sequence of stalks
        \begin{equation*}
            \begin{tikzcd}
                0\ar{r} & \mathcal{R}_{X,P}\ar{r} & \mathcal{O}_{X,P}\ar{r} & (\mathcal{O}_{X,P})_{\rm red}\ar{r} & 0.
            \end{tikzcd}
        \end{equation*}
        Thus $(\mathcal{O}_{X,P})_{\rm red}$ is the quotient of a local ring and hence local. It follows that
        $(X,(\mathcal{O}_X)_{\rm red})$ is a locally ringed space. Note that $(X,\mathcal{O}_X)$ is locally
        isomorphic to affine schemes $(\Spec A_i,\mathcal{O}_{\Spec A_i})$, and hence $(X,(\mathcal{O}_X)_{\rm red})$
        is locally isomorphic to affine schemes $(\Spec A_i/\mathcal{R}_i,\mathcal{O}_{\Spec A_i/\mathcal{R}_i})$, where
        the $\mathcal{R}_i$ are the nilradicals of $A_i$ (as $\Spec A_i\cong \Spec A_i/\mathcal{R}_i$ as sets).
        Hence $(X,(\mathcal{O}_X)_{\rm red})$ is a scheme, the reduced scheme $X_{\rm red}$ associated to $X$.
        
        Consider the reduced scheme $X_{\rm red}$ associated to $X$. The underlying topological space of $X_{\rm red}$
        is that of $X$, and hence there is a homeomorphism $f:X_{\rm red}\to X$. There is an obvious map of sheaves
        $f^\#:\mathcal{O}_X\to f_*\mathcal{O}_{X_{\rm red}}$ that on each open $U\subset X$ is the quotient map
        $\mathcal{O}_X(U)\to (\mathcal{O}_X)_{\rm red}(U)$. As the induced map on stalks is a quotient map as well,
        it is a local homomorphism, and we obtain a morphism $(f,f^\#):X_{\rm red}\to X$ of schemes.
    \item Let $f:X\to Y$ be a morphism of schemes, with $X$ reduced. We claim that $f$ factors uniquely
        through the natural map $\eta:Y_{\rm red}\to Y$, i.e. the there exists a unique $\theta:X\to Y_{\rm red}$
        making the diagram
        \begin{equation*}
            \begin{tikzcd}
                X\ar{rr}{f}\ar[dashed, swap]{rd}{\theta} & & Y\\
                & Y_{\rm red}\ar[swap]{ur}{\eta} &
            \end{tikzcd}
        \end{equation*}
        commute. It is clear that $\theta$ must be a homeomorphism when viewed as a map of the underlying spaces.
        On the level of sheaves we find that (over any open $U\subset Y$) the map $\mathcal{O}_Y(U)\to f_*\mathcal{O}_X(U)$
        takes all nilpotents to zero as $X$ is reduced. By the universal property of the quotient $\mathcal{O}_Y(U)\to \eta_*\mathcal{O}_{Y_{\rm red}}(U)$,
        there must exist a unique morphism of rings $\theta^\#(U):\eta_*\mathcal{O}_{Y_{\rm red}}(U)\to f_*\mathcal{O}_X(U)$ such that the diagram
        \begin{equation*}
            \begin{tikzcd}
                f_*\mathcal{O}_X(U) & & \mathcal{O}_Y(U)\ar{ll}\ar{ld}\\
                & \eta_*\mathcal{O}_{Y_{\rm red}}(U)\ar[dashed]{lu}{\theta^\#(U)} &
            \end{tikzcd}
        \end{equation*}
        commutes. This extends to a unique map of sheaves $\theta^\#$ making the diagram analagous to the one above commute. 
        The morphism $(\theta,\theta^\#)$ of ringed spaces is in fact a morphism of locally ringed spaces: that $\theta^\#$
        is a local homomorphism on the level of stalks is evident by the commutativity of the above diagram and the fact
        that the other maps are local on stalks.
\end{enumerate}


\subsection*{Problem II.2.4}
Let $\phi:A\to\Gamma(X,\mathcal{O}_X)$ be a morphism of rings. To prove surjectivity of $\alpha$ we wish to find a morphism $(f,f^\#)$ of schemes
with $f^\#$ inducing $\phi$ as a map of global sections. Note first that $X$ is covered by affine schemes $(U_i,\mathcal{O}_X|_{U_i})$.
The restriction maps of $\mathcal{O}_X$ yield maps $A\to\Gamma(U_i,\mathcal{O}_X|_{U_i})$ and hence,
by Proposition II.2.3(b) morphisms $U_i\to\Spec A$. These morphisms agree on their intersections (as
the compositions $\Gamma(X,\mathcal{O}_X)\to \Gamma(U_i,\mathcal{O}_X|_{U_i})\to\Gamma(U_i\cap U_j,\mathcal{O}_X|_{U_i\cap U_j})$
and $\Gamma(X,\mathcal{O}_X)\to \Gamma(U_j,\mathcal{O}_X|_{U_j})\to\Gamma(U_i\cap U_j,\mathcal{O}_X|_{U_i\cap U_j})$
are equal) and hence glue to a morphism of schemes $(X,\mathcal{O}_X)\to\Spec A$. That this morphism induces
$\phi$ on global sections follows by applying the sheaf property of $\mathcal{O}_X$ to the affine covering above.

Injectivity follows similarly; given two morphisms $f,g:(X,\mathcal{O}_X)\to\Spec A$ that induce the same
map on global sections, Proposition II.2.3(b) shows that $f$ and $g$ must agree on every affine patch, and
hence all of $X$.

\subsection*{Problem II.2.5}
Consider the scheme $(\Spec\Z,\mathcal{O}_{\Spec\Z})$. As a space, $\Spec\Z$ is the set of all prime
integers together with zero. As $\Z$ is a principal ideal domain, zero is the only non-closed point; indeed, the
closure of zero is the whole space. Now let $X$ be any scheme.
Problem II.2.4 yields a bijection
\[\Hom_\catname{Sch}(X,\Spec\Z)\cong\Hom_\catname{CRng}(\Z,\Gamma(X,\mathcal{O}_X)).\]
The hom-set on the right is clearly a one point set and thus we find that $\Spec\Z$ is final in $\catname{Sch}$.

\subsection*{Problem II.2.6}
The spectrum of the zero ring, $\Spec0$, is topologically the empty set. Given any scheme $X$ there is clearly
a unique morphism $\Spec0\to X$, which on the level of sheaves sends every section to zero.

\subsection*{Problem II.2.7}
Let $K$ be any field and consider a morphism $f:\Spec K\to X$. The image of $f$ is a point $x\in X$, and
hence the given map on structure sheaves $f^\#:\mathcal{O}_X\to f_*\mathcal{O}_{\Spec K}$ yields
ring homomorphisms $\mathcal{O}_X(U)\to K$ if $x\in U$ and $\mathcal{O}_X(U)\to 0$ otherwise. We obtain
an induced map on stalks $\mathcal{O}_{X,x}\to K$ which, by virtue of $f$ being a morphism of schemes, is
a local map. In other words, the preimage of $(0)\in K$ is the maximal $\fr m_x\subset\mathcal{O}_{X,x}$.
This induces a map of fields $\mathcal{O}_{X,x}/\fr m_x=k(x)\hookrightarrow K$.

Conversely, suppose we are given a point $x\in X$ and a map of rings $k(x)\hookrightarrow K$. We construct a map of
topological spaces $f:\Spec K\to X$, which takes $\Spec K$ to $x\in X$. We also construct a map of structure
sheaves $f^\#:\mathcal{O}_X\to f_*\mathcal{O}_{\Spec K}$: for opens $U\subset X$ not containing $x$,
$f^\#(U)=0$ as $f^{-1}(U)=\varnothing$, while for opens $U\subset X$ containing $x$, we need maps
$\mathcal{O}_X(U)\to K$. These maps are constructed using the given map $k(x)\hookrightarrow K$ via the compositions
\begin{equation*}
    \begin{tikzcd}
        \mathcal{O}_X(U)\ar{r} & \mathcal{O}_{X,x}\ar{r} & k(x)\ar[hook]{r} & K.
    \end{tikzcd}
\end{equation*}
This yields a morphism of schemes $(f,f^\#):\Spec K\to X$.

\end{document}

